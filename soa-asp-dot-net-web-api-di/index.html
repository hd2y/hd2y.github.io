<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>SOA â€”â€” ASP.NET Web API ä¾èµ–æ³¨å…¥ | åç¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç¼©å†™DIï¼‰æ˜¯å°†ç³»ç»Ÿä¸­å„å±‚å¯¹è±¡è§£è€¦çš„ä¸€ç§æ–¹å¼ï¼Œæ˜¯å®ç°æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç¼©å†™IoCï¼‰çš„ä¸€ç§å¸¸ç”¨æ–¹å¼ã€‚ æ­å»ºæ¡†æ¶é¦–å…ˆæˆ‘ä»¬æ­å»ºä¸€ä¸ªç”¨äºæµ‹è¯•çš„åŸºæœ¬æ¡†æ¶ï¼Œå› ä¸ºæœ€è¿‘åœ¨äº†è§£ FreeSqlï¼Œæ‰€ä»¥æ•°æ®è®¿é—®å°±ä½¿ç”¨ FreeSqlï¼Œåœ¨è¿™é‡Œæ¨èä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå¶è€æ¿çœŸçš„å¾ˆğŸ‚ğŸºã€‚ ä¸‹å›¾å¯ä»¥çœ‹å‡ºé¡¹ç›®çš„ç®€å•æ¶æ„ï¼š  å®ä½“å®ä½“å±‚å®šä¹‰äº†å®ä½“çš„æ¥">
<meta property="og:type" content="article">
<meta property="og:title" content="SOA â€”â€” ASP.NET Web API ä¾èµ–æ³¨å…¥">
<meta property="og:url" content="http://example.com/soa-asp-dot-net-web-api-di/index.html">
<meta property="og:site_name" content="åç¯">
<meta property="og:description" content="ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç¼©å†™DIï¼‰æ˜¯å°†ç³»ç»Ÿä¸­å„å±‚å¯¹è±¡è§£è€¦çš„ä¸€ç§æ–¹å¼ï¼Œæ˜¯å®ç°æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç¼©å†™IoCï¼‰çš„ä¸€ç§å¸¸ç”¨æ–¹å¼ã€‚ æ­å»ºæ¡†æ¶é¦–å…ˆæˆ‘ä»¬æ­å»ºä¸€ä¸ªç”¨äºæµ‹è¯•çš„åŸºæœ¬æ¡†æ¶ï¼Œå› ä¸ºæœ€è¿‘åœ¨äº†è§£ FreeSqlï¼Œæ‰€ä»¥æ•°æ®è®¿é—®å°±ä½¿ç”¨ FreeSqlï¼Œåœ¨è¿™é‡Œæ¨èä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå¶è€æ¿çœŸçš„å¾ˆğŸ‚ğŸºã€‚ ä¸‹å›¾å¯ä»¥çœ‹å‡ºé¡¹ç›®çš„ç®€å•æ¶æ„ï¼š  å®ä½“å®ä½“å±‚å®šä¹‰äº†å®ä½“çš„æ¥">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hd2y.oss-cn-beijing.aliyuncs.com/20191130104028_1575284957637.png">
<meta property="og:image" content="https://hd2y.oss-cn-beijing.aliyuncs.com/20191130101621_1575284957660.png">
<meta property="og:image" content="https://hd2y.oss-cn-beijing.aliyuncs.com/20191130101643_1575284957659.png">
<meta property="article:published_time" content="2019-12-02T11:15:37.000Z">
<meta property="article:modified_time" content="2019-12-25T10:38:55.000Z">
<meta property="article:author" content="hd2y">
<meta property="article:tag" content="SOA">
<meta property="article:tag" content="WebApi">
<meta property="article:tag" content="ä¾èµ–æ³¨å…¥">
<meta property="article:tag" content="Autofac">
<meta property="article:tag" content="Unity">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hd2y.oss-cn-beijing.aliyuncs.com/20191130104028_1575284957637.png">
  
    <link rel="alternate" href="/atom.xml" title="åç¯" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">åç¯</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS è®¢é˜…"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="æœç´¢"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-191202-soa-asp-dot-net-web-api-di" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/soa-asp-dot-net-web-api-di/" class="article-date">
  <time class="dt-published" datetime="2019-12-02T11:15:37.000Z" itemprop="datePublished">2019-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">å¼€å‘</a>â–º<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      SOA â€”â€” ASP.NET Web API ä¾èµ–æ³¨å…¥
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç¼©å†™DIï¼‰æ˜¯å°†ç³»ç»Ÿä¸­å„å±‚å¯¹è±¡è§£è€¦çš„ä¸€ç§æ–¹å¼ï¼Œæ˜¯å®ç°æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç¼©å†™IoCï¼‰çš„ä¸€ç§å¸¸ç”¨æ–¹å¼ã€‚</p>
<h2 id="æ­å»ºæ¡†æ¶"><a href="#æ­å»ºæ¡†æ¶" class="headerlink" title="æ­å»ºæ¡†æ¶"></a>æ­å»ºæ¡†æ¶</h2><p>é¦–å…ˆæˆ‘ä»¬æ­å»ºä¸€ä¸ªç”¨äºæµ‹è¯•çš„åŸºæœ¬æ¡†æ¶ï¼Œå› ä¸ºæœ€è¿‘åœ¨äº†è§£ <code>FreeSql</code>ï¼Œæ‰€ä»¥æ•°æ®è®¿é—®å°±ä½¿ç”¨ <code>FreeSql</code>ï¼Œåœ¨è¿™é‡Œæ¨èä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå¶è€æ¿çœŸçš„å¾ˆğŸ‚ğŸºã€‚</p>
<p>ä¸‹å›¾å¯ä»¥çœ‹å‡ºé¡¹ç›®çš„ç®€å•æ¶æ„ï¼š</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/20191130104028_1575284957637.png" alt="20191130104028"></p>
<h3 id="å®ä½“"><a href="#å®ä½“" class="headerlink" title="å®ä½“"></a>å®ä½“</h3><p>å®ä½“å±‚å®šä¹‰äº†å®ä½“çš„æ¥å£ <code>IBaseEntity</code> ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">IBaseEntity</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Column(IsPrimary = true, IsIdentity = true)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">long</span> Id &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> DateTime CreateTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = DateTime.Now;</span><br><span class="line">    <span class="keyword">public</span> DateTime UpdateTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = DateTime.Now;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ‡æœ¬ç±» <code>Specimen</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Specimen</span> : <span class="title">IBaseEntity</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> DateTime InspectionDate &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Type &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> SpeicimenNo &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> State &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Barcode &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> DateTime? ResultTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span>? ResultUserId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> DateTime? CheckTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span>? CheckUserId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> DateTime? ReportTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span>? ReportUserId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœåŠ¡æ¥å£"><a href="#æœåŠ¡æ¥å£" class="headerlink" title="æœåŠ¡æ¥å£"></a>æœåŠ¡æ¥å£</h3><p>æœåŠ¡æ¥å£é¦–å…ˆå®šä¹‰äº†æœåŠ¡å¸¸ç”¨çš„ä¸€äº›æ“ä½œ <code>IBaseService</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IBaseService</span>&lt;<span class="title">T</span>&gt; <span class="keyword">where</span> <span class="title">T</span> : <span class="title">IBaseEntity</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">T <span class="title">Insert</span>(<span class="params">T t</span>)</span>;</span><br><span class="line">    <span class="function">T <span class="title">Get</span>(<span class="params"><span class="built_in">int</span> id</span>)</span>;</span><br><span class="line">    <span class="function">T <span class="title">Update</span>(<span class="params">T t</span>)</span>;</span><br><span class="line">    <span class="function"><span class="built_in">bool</span> <span class="title">Delete</span>(<span class="params"><span class="built_in">int</span> id</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¸åŒçš„ä¸šåŠ¡å®ä½“ï¼Œä¹Ÿæœ‰è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ <code>ISpecimenService</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ISpecimenService</span> : <span class="title">IBaseService</span>&lt;<span class="title">Specimen</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">Specimen <span class="title">CheckSpecimen</span>(<span class="params"><span class="built_in">int</span> specimenId, <span class="built_in">int</span> userId</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœåŠ¡å®ç°"><a href="#æœåŠ¡å®ç°" class="headerlink" title="æœåŠ¡å®ç°"></a>æœåŠ¡å®ç°</h3><p>æœåŠ¡æ¥å£çš„å®ç°ï¼Œé¦–å…ˆæ˜¯ <code>IBaseService</code> çš„å®ç° <code>BaseService</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseService</span>&lt;<span class="title">T</span>&gt; : <span class="title">IBaseService</span>&lt;<span class="title">T</span>&gt; <span class="keyword">where</span> <span class="title">T</span> : <span class="title">IBaseEntity</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">virtual</span> IFreeSql FreeSql &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseService</span>(<span class="params">IFreeSql freeSql</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        FreeSql = freeSql;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">bool</span> <span class="title">Delete</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> FreeSql.Delete&lt;T&gt;(id).ExecuteAffrows() &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> T <span class="title">Get</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> FreeSql.Select&lt;T&gt;(id).First();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> T <span class="title">Insert</span>(<span class="params">T t</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="built_in">int</span> id = (<span class="built_in">int</span>)FreeSql.Insert&lt;T&gt;().AppendData(t).ExecuteIdentity();</span><br><span class="line">        <span class="keyword">return</span> FreeSql.Select&lt;T&gt;(id).First();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> T <span class="title">Update</span>(<span class="params">T t</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        t.UpdateTime = DateTime.Now;</span><br><span class="line">        <span class="built_in">int</span> rows = FreeSql.Update&lt;T&gt;(t).ExecuteAffrows();</span><br><span class="line">        <span class="keyword">if</span> (rows == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> FreeSql.Select&lt;T&gt;(t.Id).First();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ISpecimenService</code> çš„å®ç° <code>SpecimenService</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpecimenService</span> : <span class="title">BaseService</span>&lt;<span class="title">Specimen</span>&gt;, <span class="title">ISpecimenService</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpecimenService</span>(<span class="params">IFreeSql freeSql</span>) : <span class="title">base</span>(<span class="params">freeSql</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Specimen <span class="title">CheckSpecimen</span>(<span class="params"><span class="built_in">int</span> specimenId, <span class="built_in">int</span> userId</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> FreeSql.Update&lt;Specimen&gt;().Set(s =&gt; <span class="keyword">new</span> &#123; CheckUserId = userId, CheckTime = DateTime.Now &#125;).ExecuteUpdated().First();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Web-ç«™ç‚¹"><a href="#Web-ç«™ç‚¹" class="headerlink" title="Web ç«™ç‚¹"></a>Web ç«™ç‚¹</h3><p>é¦–å…ˆæ˜¯éœ€è¦åˆ›å»ºç”¨äºåˆå§‹åŒ– <code>FreeSql</code> çš„å·¥å‚ <code>FreeSqlFactory</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FreeSqlFactory</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IFreeSql FreeSql &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">FreeSqlFactory</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        FreeSql = <span class="keyword">new</span> FreeSql.FreeSqlBuilder()</span><br><span class="line">                  .UseConnectionString(global::FreeSql.DataType.Sqlite, &quot;Data Source=|DataDirectory|\\data.db;Pooling=true;Max Pool Size=10&quot;)</span><br><span class="line">                  .UseAutoSyncStructure(<span class="literal">true</span>)</span><br><span class="line">                  .Build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦æ˜¯æƒ³è®©è¯¥é¡¹ç›®ç®€å•ä¸€äº›ï¼Œæ‰€ä»¥åªè€ƒè™‘æœåŠ¡å±‚ <code>JohnSun.SOA.WebAPI.Service</code> çš„æ³¨å…¥ï¼Œæ‰€ä»¥ç›´æ¥å°†æ•°æ®åº“è®¿é—®å±‚ä¾èµ–ç»†èŠ‚ï¼Œä½¿ç”¨ <code>SQLite</code> æ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨ <code>FreeSql</code> çš„ <code>CodeFirst</code> æ¨¡å¼ã€‚</p>
<p>ç„¶åå°±åˆ›å»ºä¸€ä¸ª <code>Web API</code> æ§åˆ¶å™¨ <code>SpecimensController</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpecimensController</span> : <span class="title">ApiController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Specimen <span class="title">Get</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        SpecimenService service = <span class="keyword">new</span> SpecimenService(FreeSqlFactory.FreeSql);</span><br><span class="line">        <span class="keyword">return</span> service.Get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Specimen <span class="title">Post</span>(<span class="params">DateTime inspectionDate, <span class="built_in">string</span> speicimenNo, <span class="built_in">int</span> type, <span class="built_in">string</span> barcode = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        SpecimenService service = <span class="keyword">new</span> SpecimenService(FreeSqlFactory.FreeSql);</span><br><span class="line">        <span class="keyword">return</span> service.Insert(<span class="keyword">new</span> Specimen &#123; InspectionDate = inspectionDate, SpeicimenNo = speicimenNo, Type = type, Barcode = barcode &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåªæä¾›ä¸¤ä¸ªç®€å•çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ–°å¢æ–¹æ³•ï¼Œä¸€ä¸ªé€šè¿‡IdæŸ¥è¯¢æ•°æ®ã€‚</p>
<h3 id="è®¿é—®æµ‹è¯•"><a href="#è®¿é—®æµ‹è¯•" class="headerlink" title="è®¿é—®æµ‹è¯•"></a>è®¿é—®æµ‹è¯•</h3><p>æˆªæ­¢åˆ°ç›®å‰ï¼Œä¸€ä¸ªç®€å•çš„æµ‹è¯•é¡¹ç›®åˆ›å»ºå®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>postman</code> å¯¹é¡¹ç›®è¿›è¡Œç®€å•çš„æµ‹è¯•ã€‚</p>
<p>é¦–å…ˆæ˜¯è°ƒç”¨ <code>POST</code> æ–¹æ³•ï¼Œæ–°å¢æ ‡æœ¬ <code>http://localhost:58683/api/specimens?inspectionDate=2019-11-30&amp;speicimenNo=1001&amp;type=0</code>ï¼š</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/20191130101621_1575284957660.png" alt="20191130101621"></p>
<p>è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ›å»ºæˆåŠŸåçš„æ•°æ®åº“å®ä½“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡çš„ <code>id</code> å†ä½¿ç”¨ <code>GET</code> æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ <code>http://localhost:58683/api/specimens/1</code>ï¼š</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/20191130101643_1575284957659.png" alt="20191130101643"></p>
<h2 id="Unity-å®ç°ä¾èµ–æ³¨å…¥"><a href="#Unity-å®ç°ä¾èµ–æ³¨å…¥" class="headerlink" title="Unity å®ç°ä¾èµ–æ³¨å…¥"></a>Unity å®ç°ä¾èµ–æ³¨å…¥</h2><p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å°†ç§»é™¤ä¾èµ–å…·ä½“å®ç°çš„æ­¥éª¤ç½—åˆ—å‡ºæ¥ï¼Œæ–¹ä¾¿å¯¹æ§åˆ¶åè½¬çš„å®ç°æœ‰ä¸€ä¸ªç®€å•çš„äº†è§£ã€‚</p>
<h3 id="ä½¿ç”¨-Unity-åˆ›å»ºå¯¹è±¡"><a href="#ä½¿ç”¨-Unity-åˆ›å»ºå¯¹è±¡" class="headerlink" title="ä½¿ç”¨ Unity åˆ›å»ºå¯¹è±¡"></a>ä½¿ç”¨ Unity åˆ›å»ºå¯¹è±¡</h3><p>é¦–å…ˆæˆ‘ä»¬å°†å¯¹è±¡çš„åˆ›å»ºç§»äº¤ç»™ <code>Unity</code>ï¼Œé¦–å…ˆæˆ‘ä»¬ä½¿ç”¨ <code>nuget</code> ä¸º <code>Web</code> é¡¹ç›®æ·»åŠ  <code>Unity</code> çš„åŒ…å¼•ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-Package Unity -Version 5.11.1</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç»Ÿä¸€çš„ä¾èµ–æ³¨å…¥å®¹å™¨ï¼Œå°†éœ€è¦ç”¨åˆ°çš„ç±»å‹æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IUnityContainer container = <span class="keyword">new</span> UnityContainer();</span><br><span class="line"><span class="comment">// æ³¨å†Œå•ä¾‹ å› ä¸º ISpecimenService çš„æ„é€ å‡½æ•°éœ€è¦æä¾›ä¸€ä¸ª IFreeSql çš„å‚æ•°</span></span><br><span class="line">container.RegisterInstance(FreeSqlFactory.FreeSql);</span><br><span class="line"><span class="comment">// æ³¨å†Œ SpecimenService åˆ° ISpecimenService</span></span><br><span class="line">container.RegisterType&lt;ISpecimenService, SpecimenService&gt;();</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬åˆ›å»º <code>ISpecimenService</code> çš„å®ä¾‹å¯¹è±¡å°±ä¸éœ€è¦å†ä¾èµ–ç»†èŠ‚ <code>SpecimenService</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ISpecimenService service = container.Resolve&lt;ISpecimenService&gt;();</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒæ•´ä¸ºå·¥å‚"><a href="#è°ƒæ•´ä¸ºå·¥å‚" class="headerlink" title="è°ƒæ•´ä¸ºå·¥å‚"></a>è°ƒæ•´ä¸ºå·¥å‚</h3><p>æˆ‘ä»¬å¹¶ä¸éœ€è¦æ¯æ¬¡åˆå§‹åŒ– <code>ISpecimenService</code> éƒ½åˆ›å»ºä¸€ä¸ªä¾èµ–æ³¨å…¥çš„å®¹å™¨ï¼Œå®é™…ä¸Šè¿™ä¸ªå®¹å™¨åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¢åŠ ä¸€ä¸ª <code>ContainerFactory</code> çš„ç±»å‹ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ContainerFactory</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IUnityContainer Container &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">ContainerFactory</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Container = <span class="keyword">new</span> UnityContainer();</span><br><span class="line">        Container.RegisterInstance(FreeSqlFactory.FreeSql);</span><br><span class="line">        Container.RegisterType&lt;ISpecimenService, SpecimenService&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åè°ƒæ•´æˆ‘ä»¬çš„æ§åˆ¶å™¨ <code>SpecimensController</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Specimen <span class="title">Get</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ISpecimenService service = ContainerFactory.Container.Resolve&lt;ISpecimenService&gt;();</span><br><span class="line">    <span class="keyword">return</span> service.Get(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Specimen <span class="title">Post</span>(<span class="params">DateTime inspectionDate, <span class="built_in">string</span> speicimenNo, <span class="built_in">int</span> type, <span class="built_in">string</span> barcode = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ISpecimenService service = ContainerFactory.Container.Resolve&lt;ISpecimenService&gt;();</span><br><span class="line">    <span class="keyword">return</span> service.Insert(<span class="keyword">new</span> Specimen &#123; InspectionDate = inspectionDate, SpeicimenNo = speicimenNo, Type = type, Barcode = barcode &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒæ•´ä¸ºä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="#è°ƒæ•´ä¸ºä½¿ç”¨é…ç½®æ–‡ä»¶" class="headerlink" title="è°ƒæ•´ä¸ºä½¿ç”¨é…ç½®æ–‡ä»¶"></a>è°ƒæ•´ä¸ºä½¿ç”¨é…ç½®æ–‡ä»¶</h3><p>å› ä¸º <code>ContainerFactory</code> å·¥å‚ç±»æ³¨å†Œæ—¶ä»ç„¶å­˜åœ¨ <code>SpecimenService</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°†æ”¹ç±»å‹ä»ä¸Šå±‚ä¸­ç§»é™¤ï¼Œå¦åˆ™æˆ‘ä»¬ä»ç„¶æ— æ³•æŒ‡å®š <code>ISpecimenService</code>ã€‚</p>
<p>Unity ä¸ºæˆ‘ä»¬æä¾›äº†ä½¿ç”¨é…ç½®æ–‡ä»¶åˆå§‹åŒ–ä¾èµ–æ³¨å…¥å®¹å™¨çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘ä»¬ç§»é™¤ <code>Web</code> å¯¹äº <code>JohnSun.SOA.WebAPI.Service</code> é¡¹ç›®çš„å¼•ç”¨ï¼Œä½¿æœåŠ¡ä¸å†å¼ºä¾èµ–äºè¯¥é¡¹ç›®ï¼Œæ–¹ä¾¿åæœŸå¯¹äº§å“çš„å‡çº§æ”¹é€ ã€‚</p>
<p>ä½†æ˜¯æµ‹è¯•é¡¹ç›®ä»ç„¶éœ€è¦ä¸€ä¸ªå®ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç§»é™¤ä¾èµ–åï¼Œæ‰‹åŠ¨çš„å°† <code>JohnSun.SOA.WebAPI.Service/bin</code> ç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´åˆ° <code>JohnSun.SOA.WebAPI.Server/bin</code> ä¸‹ã€‚</p>
<p>æ·»åŠ  <code>Unity.Configuration</code> çš„å¼•ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-Package Unity.Configuration -Version 5.11.1</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>Web</code> é¡¹ç›®ä¸­æ·»åŠ é…ç½®æ–‡ä»¶ <code>ConfigFiles/Unity.config</code>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configSections</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">name</span>=<span class="string">&quot;unity&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Unity.Configuration&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configSections</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">unity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliases</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">add</span> <span class="attr">alias</span>=<span class="string">&quot;ISpecimenService&quot;</span> <span class="attr">type</span>=<span class="string">&quot;JohnSun.SOA.WebAPI.Interface.ISpecimenService, JohnSun.SOA.WebAPI.Interface&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">add</span> <span class="attr">alias</span>=<span class="string">&quot;SpecimenService&quot;</span> <span class="attr">type</span>=<span class="string">&quot;JohnSun.SOA.WebAPI.Service.SpecimenService, JohnSun.SOA.WebAPI.Service&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">container</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">register</span> <span class="attr">type</span>=<span class="string">&quot;ISpecimenService&quot;</span> <span class="attr">mapTo</span>=<span class="string">&quot;SpecimenService&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">unity</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è°ƒæ•´ <code>ContainerFactory</code> çš„é™æ€æ„é€ å‡½æ•°ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Container = <span class="keyword">new</span> UnityContainer();</span><br><span class="line">Container.RegisterInstance(FreeSqlFactory.FreeSql);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> configPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, <span class="string">@&quot;ConfigFiles\Unity.config&quot;</span>);</span><br><span class="line">ExeConfigurationFileMap map = <span class="keyword">new</span> ExeConfigurationFileMap &#123; ExeConfigFilename = configPath &#125;;</span><br><span class="line">Configuration configuration = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None);</span><br><span class="line">UnityConfigurationSection section = (UnityConfigurationSection)configuration.GetSection(UnityConfigurationSection.SectionName);</span><br><span class="line"></span><br><span class="line">section.Configure(Container);</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶åœ¨ <code>Web</code> é¡¹ç›®ä¸­å·²ç»ä¸éœ€è¦ä¾èµ– <code>JohnSun.SOA.WebAPI.Service</code> çš„ä»»ä½•ç»†èŠ‚ï¼Œå‡å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<br><br>FreeSql ä»ç„¶ä¾èµ–ç»†èŠ‚ï¼Œå‰æ–‡å·²ç»æåˆ°ä¸ºäº†æµ‹è¯•é¡¹ç›®çš„ç®€å•ï¼Œæ‰€ä»¥å°± <code>ä¸è¦åœ¨æ„ç»†èŠ‚</code> äº†ã€‚<br><br>åé¢å†™åˆ°è¿™æ®µä»£ç çš„æ—¶å€™æœ‰è€ƒè™‘å°† <code>FreeSqlFactory.FreeSql</code> ç§»äº¤ç»™é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯é…ç½®æ–‡ä»¶ <code>instance</code> èŠ‚ç‚¹åœ¨ <code>Unity</code> é¡¹ç›®ä¸­ç»™å‡ºçš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ— æ³•æŒ‡å®š <code>value</code> ä¸ºä¸€ä¸ªç¨‹åºä¸­çš„å­—æ®µæˆ–å±æ€§ï¼Œ<code>value</code> åªèƒ½è®¾ç½®ä¸€äº›å¸¸é‡å€¼ä¾‹å¦‚å­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚<br><br>åé¢ä»”ç»†æƒ³äº†ä¸€ä¸‹ï¼Œå¦‚æœçœŸçš„æƒ³ç§»é™¤ä¾èµ–ï¼Œå¯èƒ½éœ€è¦å¢åŠ ä¸€ä¸ªç±»ä¼¼ <code>IFreeSqlInfo</code> çš„å¯¹è±¡ï¼Œå°† <code>IFreeSql</code> ä½œä¸ºè¯¥ç±»å‹çš„ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬è¿˜å¯ä»¥æä¾›ä¸€ä¸ªå¤šä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥æŒ‡å®šè¿æ¥çš„æ•°æ®åº“ã€æ•°æ®åº“ç±»å‹ã€è¿æ¥å­—ç¬¦ä¸²ã€æ˜¯å¦å¯ç”¨æ•°æ®åº“è¿ç§»ç­‰ç­‰ã€‚<br><br>å½“ç„¶ï¼Œæœ€ç»ˆä¹Ÿè¦å°† <code>SpecimenService</code> æ„é€ å‡½æ•°ä¸­çš„ <code>IFreeSql</code> è°ƒæ•´æˆ <code>IFreeSqlInfo</code> çš„å®ç°æ‰è¡Œã€‚</p>
</blockquote>
<h3 id="æ§åˆ¶å™¨çš„æ³¨å…¥"><a href="#æ§åˆ¶å™¨çš„æ³¨å…¥" class="headerlink" title="æ§åˆ¶å™¨çš„æ³¨å…¥"></a>æ§åˆ¶å™¨çš„æ³¨å…¥</h3><p>è™½ç„¶å·²ç»æˆåŠŸæ·»åŠ å®¹å™¨ï¼Œç§»é™¤äº†ç»†èŠ‚çš„ä¾èµ–ï¼Œä½†æ˜¯æ§åˆ¶å™¨ä¸­æˆ‘ä»¬ä»ç„¶éœ€è¦ä½¿ç”¨ <code>Resolve</code> æ„é€ å¯¹è±¡ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥æˆ‘ä»¬éœ€è¦å°† <code>Service</code> å¯¹è±¡çš„æ„é€ ä¹Ÿæ³¨å…¥è¿›æ¥ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹æ§åˆ¶å™¨çš„ç»“æ„ï¼Œå°† <code>SpecimensController</code> æ§åˆ¶å™¨è°ƒæ•´ä¸ºä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpecimensController</span> : <span class="title">ApiController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> ISpecimenService _specimenService;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpecimensController</span>(<span class="params">ISpecimenService specimenService</span>) </span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        _specimenService = specimenService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Specimen <span class="title">Get</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> _specimenService.Get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Specimen <span class="title">Post</span>(<span class="params">DateTime inspectionDate, <span class="built_in">string</span> speicimenNo, <span class="built_in">int</span> type, <span class="built_in">string</span> barcode = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> _specimenService.Insert(<span class="keyword">new</span> Specimen &#123; InspectionDate = inspectionDate, SpeicimenNo = speicimenNo, Type = type, Barcode = barcode &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™å¦‚æœç›´æ¥è¿è¡Œé¡¹ç›®è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºæ§åˆ¶å™¨é»˜è®¤æ— å‚æ•°çš„æ„é€ å‡½æ•°å·²ç»ä¸å­˜åœ¨äº†ï¼Œä¼šæŠ¥é”™ã€‚</p>
<h4 id="ä¼ ç»Ÿæ–¹å¼æ³¨å…¥"><a href="#ä¼ ç»Ÿæ–¹å¼æ³¨å…¥" class="headerlink" title="ä¼ ç»Ÿæ–¹å¼æ³¨å…¥"></a>ä¼ ç»Ÿæ–¹å¼æ³¨å…¥</h4><p>æ ¹æ® MSDN ä¸Šçš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Web API å®šä¹‰ç”¨äºè§£æä¾èµ–é¡¹çš„ <code>IDependencyResolver</code> æ¥å£æ¥å®ç°æ§åˆ¶å™¨çš„æ³¨å…¥ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IDependencyResolver</span> : <span class="title">IDependencyScope</span>, <span class="title">IDisposable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">IDependencyScope <span class="title">BeginScope</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IDependencyScope</span> : <span class="title">IDisposable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="built_in">object</span> <span class="title">GetService</span>(<span class="params">Type serviceType</span>)</span>;</span><br><span class="line">    <span class="function">IEnumerable&lt;<span class="built_in">object</span>&gt; <span class="title">GetServices</span>(<span class="params">Type serviceType</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>IDependencyScope</code> æ¥å£æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li><code>GetService</code> åˆ›å»ºä¸€ä¸ªç±»å‹çš„å®ä¾‹ã€‚</li>
<li><code>GetServices</code> åˆ›å»ºæŒ‡å®šç±»å‹çš„å¯¹è±¡çš„é›†åˆã€‚</li>
</ul>
<p><code>IDependencyResolver</code> æ–¹æ³•ç»§æ‰¿ <code>IDependencyScope</code> å¹¶æ·»åŠ  <code>BeginScope</code> æ–¹æ³•ã€‚</p>
<p>å½“ Web API åˆ›å»ºæ§åˆ¶å™¨å®ä¾‹æ—¶ï¼Œå®ƒå°†é¦–å…ˆè°ƒç”¨ <code>IDependencyResolver</code> çš„ <code>GetService</code> æ–¹æ³•ï¼Œå¹¶ä¼ å…¥æ§åˆ¶å™¨ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è¯¥ç‰¹æ€§ï¼Œæ¥æ„é€ ä»»ä½•æ§åˆ¶å™¨ï¼Œå¦‚æœ <code>GetService</code> è¿”å› <code>Null</code>ï¼ŒWeb API å°†åœ¨æ§åˆ¶å™¨ç±»ä¸ŠæŸ¥æ‰¾æ— å‚æ•°çš„æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnityResolver</span> : <span class="title">IDependencyResolver</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">protected</span> IUnityContainer container;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UnityResolver</span>(<span class="params">IUnityContainer container</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (container == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="string">&quot;container&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.container = container;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IDependencyScope <span class="title">BeginScope</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UnityResolver(container.CreateChildContainer());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Dispose(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"><span class="built_in">bool</span> disposing</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        container.Dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">object</span> <span class="title">GetService</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ContainerFactory.Container.Resolve(serviceType);</span><br><span class="line">        &#125;</span><br><span class="line">        catch (ResolutionFailedException)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerable&lt;<span class="built_in">object</span>&gt; <span class="title">GetServices</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ContainerFactory.Container.ResolveAll(serviceType);</span><br><span class="line">        &#125;</span><br><span class="line">        catch (ResolutionFailedException)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> List&lt;<span class="built_in">object</span>&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬éœ€è¦å°† <code>HttpConfiguration</code> ä¸­çš„ <code>DependencyResolver</code> å±æ€§æ›¿æ¢ä¸ºæˆ‘ä»¬å®ç°çš„ <code>UnityResolver</code>ã€‚</p>
<p>ä¿®æ”¹ <code>WebApiConfig.Register</code> æ–¹æ³•ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.DependencyResolver = <span class="keyword">new</span> UnityResolver(ContainerFactory.Container);</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨-Unity-WebAPI"><a href="#ä½¿ç”¨-Unity-WebAPI" class="headerlink" title="ä½¿ç”¨ Unity.WebAPI"></a>ä½¿ç”¨ Unity.WebAPI</h4><p>Unity æä¾›äº†ä¸€ä¸ªåŒ…ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶å™¨çš„æ³¨å…¥ï¼Œé¦–å…ˆè¦é€šè¿‡ <code>nuget</code> å®‰è£…åŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-Package Unity.WebAPI -Version 5.4.0</span><br></pre></td></tr></table></figure>
<p>åŒä¹‹å‰ä¸€æ ·ï¼Œä¿®æ”¹ <code>WebApiConfig.Register</code> æ–¹æ³•ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.DependencyResolver = <span class="keyword">new</span> Unity.WebApi.UnityDependencyResolver(ContainerFactory.Container);</span><br></pre></td></tr></table></figure>
<p><code>UnityDependencyResolver</code> ç±»å‹æ˜¯å¸®æˆ‘ä»¬å®ç°çš„ <code>IDependencyResolver</code> æ¥å£ï¼Œé€šè¿‡åç¼–è¯‘ä»£ç å¯ä»¥äº†è§£å’Œæˆ‘ä»¬ä» <code>MSDN</code> çš„å¸¸è§„å®ç°åŸºæœ¬ä¸€è‡´ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Unity.WebApi.UnityDependencyScope</span></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Web.Http.Controllers;</span><br><span class="line"><span class="keyword">using</span> System.Web.Http.Dependencies;</span><br><span class="line"><span class="keyword">using</span> Unity;</span><br><span class="line"><span class="keyword">using</span> Unity.Resolution;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnityDependencyScope</span> : <span class="title">IDependencyScope</span>, <span class="title">IDisposable</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">protected</span> IUnityContainer Container</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">get</span>;</span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">set</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UnityDependencyScope</span>(<span class="params">IUnityContainer container</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		Container = container;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="built_in">object</span> <span class="title">GetService</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">typeof</span>(IHttpController).IsAssignableFrom(serviceType))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> UnityContainerExtensions.Resolve(Container, serviceType, (ResolverOverride[])(<span class="built_in">object</span>)<span class="keyword">new</span> ResolverOverride[<span class="number">0</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> UnityContainerExtensions.Resolve(Container, serviceType, (ResolverOverride[])(<span class="built_in">object</span>)<span class="keyword">new</span> ResolverOverride[<span class="number">0</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">		catch</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> IEnumerable&lt;<span class="built_in">object</span>&gt; <span class="title">GetServices</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">return</span> UnityContainerExtensions.ResolveAll(Container, serviceType, (ResolverOverride[])(<span class="built_in">object</span>)<span class="keyword">new</span> ResolverOverride[<span class="number">0</span>]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		((IDisposable)Container).Dispose();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Unity.WebApi.UnityDependencyResolver</span></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Web.Http.Dependencies;</span><br><span class="line"><span class="keyword">using</span> Unity;</span><br><span class="line"><span class="keyword">using</span> Unity.WebApi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnityDependencyResolver</span> : <span class="title">UnityDependencyScope</span>, <span class="title">IDependencyResolver</span>, <span class="title">IDependencyScope</span>, <span class="title">IDisposable</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UnityDependencyResolver</span>(<span class="params">IUnityContainer container</span>)</span></span><br><span class="line"><span class="function">		: <span class="title">base</span>(<span class="params">container</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> IDependencyScope <span class="title">BeginScope</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">return</span> (IDependencyScope)(<span class="built_in">object</span>)<span class="keyword">new</span> UnityDependencyScope(<span class="keyword">base</span>.Container.CreateChildContainer());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Autofac-å®ç°ä¾èµ–æ³¨å…¥"><a href="#Autofac-å®ç°ä¾èµ–æ³¨å…¥" class="headerlink" title="Autofac å®ç°ä¾èµ–æ³¨å…¥"></a>Autofac å®ç°ä¾èµ–æ³¨å…¥</h2><p>ç›¸è¾ƒäº <code>Unity</code>ï¼Œå…¶å® <code>Autofac</code> ä½¿ç”¨æ›´å¹¿æ³›ï¼Œæ™®éè®¤ä¸ºåè€…çš„æ€§èƒ½è¡¨ç°è¦ä¼˜äºå‰è€…ï¼Œå¹¶ä¸”åè€…æ‹¥æœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œç¤¾åŒºæ›´æ´»è·ƒã€‚</p>
<h3 id="ä»£ç ä¸­ä¸ºå®¹å™¨æ³¨å†Œç±»å‹"><a href="#ä»£ç ä¸­ä¸ºå®¹å™¨æ³¨å†Œç±»å‹" class="headerlink" title="ä»£ç ä¸­ä¸ºå®¹å™¨æ³¨å†Œç±»å‹"></a>ä»£ç ä¸­ä¸ºå®¹å™¨æ³¨å†Œç±»å‹</h3><p>æœ¬è´¨ä¸Š Autofac ä¸å‰è€…å·®å¼‚ä¸å¤§ï¼Œæ‰€ä»¥è¿™é‡Œåªæ˜¯ç®€å•çš„ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ï¼Œæ›´å¤šçš„çŸ¥è¯†å¯ä»¥äº†è§£å®˜æ–¹çš„æ–‡æ¡£ã€‚</p>
<p>è¿™é‡Œæ·»åŠ ä¸€ä¸ª <code>AutofacContainerFactory</code> çš„ç±»å‹ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AutofacContainerFactory</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IContainer Container &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">AutofacContainerFactory</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// Autofac åœ¨ç¨‹åºä¸­æ³¨å†Œ</span></span><br><span class="line">        <span class="keyword">var</span> builder = <span class="keyword">new</span> ContainerBuilder();</span><br><span class="line">        builder.RegisterInstance(FreeSqlFactory.FreeSql);</span><br><span class="line">        builder.RegisterType&lt;SpecimenService&gt;().As&lt;ISpecimenService&gt;();</span><br><span class="line">        Container = builder.Build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶æ— æ³•è¿è¡Œç¨‹åºï¼Œç”šè‡³ä¼šæŠ¥é”™ï¼Œå› ä¸ºåŸºäº <code>Unity</code> çš„é‚£å¥—ä»£ç ï¼Œ<code>Service</code> çš„é¡¹ç›®ä¾èµ–å·²ç»ç§»é™¤ï¼Œè¿™é‡Œä¼šæŠ¥é”™ã€‚æ‰€ä»¥è¿™é‡ŒçŸ¥è¯†ä»£ç æ¼”ç¤ºã€‚</p>
<h3 id="ä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="#ä½¿ç”¨é…ç½®æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨é…ç½®æ–‡ä»¶"></a>ä½¿ç”¨é…ç½®æ–‡ä»¶</h3><p>ç”±äº <code>Autofac 4.0+</code> é…ç½®ä¾èµ–äº <code>Microsoft.Extensions.Configuration.Xml</code> æˆ– <code>Microsoft.Extensions.Configuration.Json</code>ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªé¡¹ç›®ä¾èµ–äº <code>.NET Standard 2.0</code>ï¼Œæ‰€ä»¥éœ€è¦å°†é¡¹ç›®éƒ½å‡çº§åˆ° <code>.NET Framework 4.6.1+</code>ã€‚</p>
<p>å¦å¤–ä¸ºäº†èƒ½è®©é¡¹ç›®æˆåŠŸè¿è¡Œèµ·æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯ <code>Autofac</code> å®ç°ä¾èµ–æ³¨å…¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¼•ç”¨å‡ ä¸ª nuget ç¨‹åºåŒ…ï¼š</p>
<ul>
<li><code>Autofac.Configuration</code>ï¼šä¸º <code>autofac</code> æä¾›é…ç½®åŠŸèƒ½ã€‚</li>
<li><code>Autofac.WebApi2</code>ï¼šASP.NET Web API æ§åˆ¶å™¨çš„ä¾èµ–æ³¨å…¥ã€‚</li>
<li><code>Microsoft.Extensions.Configuration.Json</code>ï¼šå¦‚æœä½¿ç”¨ json æ–‡ä»¶é…ç½® autofac æ·»åŠ è¯¥å¼•ç”¨ã€‚</li>
<li><code>Microsoft.Extensions.Configuration.Xml</code>ï¼šå¦‚æœä½¿ç”¨ xml æ–‡ä»¶é…ç½® autofac æ·»åŠ è¯¥å¼•ç”¨ã€‚</li>
</ul>
<p>è°ƒæ•´ <code>AutofacContainerFactory</code> é™æ€æ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AutofacContainerFactory</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> IContainer Container &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">AutofacContainerFactory</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// Autofac åœ¨ç¨‹åºä¸­æ³¨å†Œ</span></span><br><span class="line">        <span class="comment">//var builder = new ContainerBuilder();</span></span><br><span class="line">        <span class="comment">//builder.RegisterInstance(FreeSqlFactory.FreeSql);</span></span><br><span class="line">        <span class="comment">//builder.RegisterType&lt;Service.SpecimenService&gt;().As&lt;ISpecimenService&gt;();</span></span><br><span class="line">        <span class="comment">//builder.RegisterApiControllers(AppDomain.CurrentDomain.GetAssemblies());</span></span><br><span class="line">        <span class="comment">//Container = builder.Build();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Autofac ä½¿ç”¨é…ç½®æ–‡ä»¶æ³¨å†Œ</span></span><br><span class="line">        <span class="keyword">var</span> builder = <span class="keyword">new</span> ContainerBuilder();</span><br><span class="line">        builder.RegisterInstance(FreeSqlFactory.FreeSql);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> config = <span class="keyword">new</span> ConfigurationBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Json æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//string configPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, @&quot;ConfigFiles\Autofac.json&quot;);</span></span><br><span class="line">        <span class="comment">//config.AddJsonFile(configPath);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Xml æ–‡ä»¶</span></span><br><span class="line">        <span class="built_in">string</span> configPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, <span class="string">@&quot;ConfigFiles\Autofac.config&quot;</span>);</span><br><span class="line">        config.AddXmlFile(configPath);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> module = <span class="keyword">new</span> ConfigurationModule(config.Build());</span><br><span class="line">        builder.RegisterModule(module);</span><br><span class="line"></span><br><span class="line">        builder.RegisterApiControllers(AppDomain.CurrentDomain.GetAssemblies());</span><br><span class="line"></span><br><span class="line">        Container = builder.Build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ å¯¹åº”çš„é…ç½®æ–‡ä»¶åˆ° <code>ConfigFiles</code> æ–‡ä»¶å¤¹ï¼Œ<code>Autofac.config</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">autofac</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">components</span> <span class="attr">name</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>JohnSun.SOA.WebAPI.Service.SpecimenService, JohnSun.SOA.WebAPI.Service<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">services</span> <span class="attr">name</span>=<span class="string">&quot;0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;JohnSun.SOA.WebAPI.Interface.ISpecimenService, JohnSun.SOA.WebAPI.Interface&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">components</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">autofac</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>Autofac.json</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;components&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;JohnSun.SOA.WebAPI.Service.SpecimenService, JohnSun.SOA.WebAPI.Service&quot;</span>,</span><br><span class="line">      <span class="string">&quot;services&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;JohnSun.SOA.WebAPI.Interface.ISpecimenService, JohnSun.SOA.WebAPI.Interface&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆä¿®æ”¹æˆ‘ä»¬çš„ <code>WebApiConfig.Register</code> æ–¹æ³•ï¼Œå°† <code>config.DependencyResolver</code> ä¿®æ”¹ä¸º<code>AutofacWebApiDependencyResolver</code>ï¼Œæ³¨æ„è¿™ä¸ªç±»å‹æ˜¯åœ¨ <code>Autofac.WebApi2</code> ä¸­çš„ç±»å‹ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.DependencyResolver = <span class="keyword">new</span> Autofac.Integration.WebApi.AutofacWebApiDependencyResolver(AutofacContainerFactory.Container);</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œå¦‚æœæ²¡æœ‰é…ç½®é”™è¯¯ï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®æˆ‘ä»¬çš„æ§åˆ¶å™¨è·å–æ•°æ®ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ul>
<li>ConfigFiles æ–‡ä»¶å¤¹ä¸‹çš„é…ç½®æ–‡ä»¶å±æ€§â€œå¤åˆ¶åˆ°è¾“å‡ºç›®å½•â€åº”è¯¥ä¿®æ”¹ä¸ºï¼šâ€œå¦‚æœè¾ƒæ–°åˆ™å¤åˆ¶â€ã€‚</li>
<li>å·¥å‚ç±» <code>AutofacContainerFactory</code> æ„å»ºå®¹å™¨æ—¶ä¸€å®šè¦è°ƒç”¨ <code>builder.RegisterApiControllers()</code> æ–¹æ³•ï¼Œä¸åŒäº Unity çš„åŸå› å¯ä»¥å‚çœ‹åæ–‡ <code>AutofacWebApiDependencyResolver</code> ç±»å‹çš„åç¼–è¯‘ä»£ç ã€‚</li>
</ul>
<h3 id="AutofacWebApiDependencyResolver-ç±»å‹"><a href="#AutofacWebApiDependencyResolver-ç±»å‹" class="headerlink" title="AutofacWebApiDependencyResolver ç±»å‹"></a>AutofacWebApiDependencyResolver ç±»å‹</h3><p>åç¼–è¯‘ <code>nuget</code> åŒ… <code>Autofac.WebApi2.nupkg</code> ä¸­çš„ <code>Autofac.Integration.WebApi.dll</code> æ–‡ä»¶å¯ä»¥æ‰¾åˆ°è¯¥ç±»å‹ï¼š</p>
<p><code>Autofac.Integration.WebApi.AutofacWebApiDependencyScope</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Autofac;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Web.Http.Dependencies;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Autofac implementation of the <span class="doctag">&lt;see cref=&quot;T:System.Web.Http.Dependencies.IDependencyScope&quot; /&gt;</span> interface.</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AutofacWebApiDependencyScope</span> : <span class="title">IDependencyScope</span>, <span class="title">IDisposable</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="built_in">bool</span> _disposed;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">readonly</span> ILifetimeScope _lifetimeScope;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Gets the lifetime scope for the current dependency scope.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="keyword">public</span> ILifetimeScope LifetimeScope =&gt; _lifetimeScope;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Initializes a new instance of the <span class="doctag">&lt;see cref=&quot;T:Autofac.Integration.WebApi.AutofacWebApiDependencyScope&quot; /&gt;</span> class.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;lifetimeScope&quot;&gt;</span>The lifetime scope to resolve services from.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AutofacWebApiDependencyScope</span>(<span class="params">ILifetimeScope lifetimeScope</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">if</span> (lifetimeScope == <span class="literal">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="string">&quot;lifetimeScope&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		_lifetimeScope = lifetimeScope;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Finalizes an instance of the <span class="doctag">&lt;see cref=&quot;T:Autofac.Integration.WebApi.AutofacWebApiDependencyScope&quot; /&gt;</span> class.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	~AutofacWebApiDependencyScope()</span><br><span class="line">	&#123;</span><br><span class="line">		Dispose(disposing: <span class="literal">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Try to get a service of the given type.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;serviceType&quot;&gt;</span>ControllerType of service to request.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>An instance of the service, or null if the service is not found.<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="built_in">object</span> <span class="title">GetService</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">return</span> ResolutionExtensions.ResolveOptional((IComponentContext)(<span class="built_in">object</span>)_lifetimeScope, serviceType);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Try to get a list of services of the given type.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;serviceType&quot;&gt;</span>ControllerType of services to request.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>An enumeration (possibly empty) of the service.<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> IEnumerable&lt;<span class="built_in">object</span>&gt; <span class="title">GetServices</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">if</span> (!ResolutionExtensions.IsRegistered((IComponentContext)(<span class="built_in">object</span>)_lifetimeScope, serviceType))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> Enumerable.Empty&lt;<span class="built_in">object</span>&gt;();</span><br><span class="line">		&#125;</span><br><span class="line">		Type enumerableServiceType = <span class="keyword">typeof</span>(IEnumerable&lt;&gt;).MakeGenericType(serviceType);</span><br><span class="line">		<span class="keyword">return</span> (IEnumerable&lt;<span class="built_in">object</span>&gt;)ResolutionExtensions.Resolve((IComponentContext)(<span class="built_in">object</span>)_lifetimeScope, enumerableServiceType);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Performs application-defined tasks associated with freeing, releasing, or resetting unmanaged resources.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		Dispose(disposing: <span class="literal">true</span>);</span><br><span class="line">		GC.SuppressFinalize(<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Releases unmanaged and - optionally - managed resources.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;disposing&quot;&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;see langword=&quot;true&quot; /&gt;</span> to release both managed and unmanaged resources;</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;see langword=&quot;false&quot; /&gt;</span> to release only unmanaged resources.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"><span class="built_in">bool</span> disposing</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">if</span> (!_disposed)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (disposing &amp;&amp; _lifetimeScope != <span class="literal">null</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				((IDisposable)_lifetimeScope).Dispose();</span><br><span class="line">			&#125;</span><br><span class="line">			_disposed = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Autofac.Integration.WebApi.AutofacWebApiDependencyResolver</code>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Autofac;</span><br><span class="line"><span class="keyword">using</span> Autofac.Core.Lifetime;</span><br><span class="line"><span class="keyword">using</span> Autofac.Integration.WebApi;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Web.Http.Dependencies;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Autofac implementation of the <span class="doctag">&lt;see cref=&quot;T:System.Web.Http.Dependencies.IDependencyResolver&quot; /&gt;</span> interface.</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AutofacWebApiDependencyResolver</span> : <span class="title">IDependencyResolver</span>, <span class="title">IDependencyScope</span>, <span class="title">IDisposable</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="built_in">bool</span> _disposed;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">readonly</span> ILifetimeScope _container;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">readonly</span> IDependencyScope _rootDependencyScope;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">readonly</span> Action&lt;ContainerBuilder&gt; _configurationAction;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Gets the root container provided to the dependency resolver.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="keyword">public</span> ILifetimeScope Container =&gt; _container;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Initializes a new instance of the <span class="doctag">&lt;see cref=&quot;T:Autofac.Integration.WebApi.AutofacWebApiDependencyResolver&quot; /&gt;</span> class.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;container&quot;&gt;</span>The container that nested lifetime scopes will be create from.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;configurationAction&quot;&gt;</span>A configuration action that will execute during lifetime scope creation.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AutofacWebApiDependencyResolver</span>(<span class="params">ILifetimeScope container, Action&lt;ContainerBuilder&gt; configurationAction</span>)</span></span><br><span class="line"><span class="function">		: <span class="title">this</span>(<span class="params">container</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">if</span> (configurationAction == <span class="literal">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="string">&quot;configurationAction&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		_configurationAction = configurationAction;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Initializes a new instance of the <span class="doctag">&lt;see cref=&quot;T:Autofac.Integration.WebApi.AutofacWebApiDependencyResolver&quot; /&gt;</span> class.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;container&quot;&gt;</span>The container that nested lifetime scopes will be create from.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AutofacWebApiDependencyResolver</span>(<span class="params">ILifetimeScope container</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">if</span> (container == <span class="literal">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="string">&quot;container&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		_container = container;</span><br><span class="line">		_rootDependencyScope = (IDependencyScope)(<span class="built_in">object</span>)<span class="keyword">new</span> AutofacWebApiDependencyScope(container);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Finalizes an instance of the <span class="doctag">&lt;see cref=&quot;T:Autofac.Integration.WebApi.AutofacWebApiDependencyResolver&quot; /&gt;</span> class.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	~AutofacWebApiDependencyResolver()</span><br><span class="line">	&#123;</span><br><span class="line">		Dispose(disposing: <span class="literal">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Try to get a service of the given type.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;serviceType&quot;&gt;</span>Type of service to request.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>An instance of the service, or null if the service is not found.<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">object</span> <span class="title">GetService</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">return</span> _rootDependencyScope.GetService(serviceType);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Try to get a list of services of the given type.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;serviceType&quot;&gt;</span>ControllerType of services to request.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>An enumeration (possibly empty) of the service.<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> IEnumerable&lt;<span class="built_in">object</span>&gt; <span class="title">GetServices</span>(<span class="params">Type serviceType</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">return</span> _rootDependencyScope.GetServices(serviceType);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Starts a resolution scope. Objects which are resolved in the given scope will belong to</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> that scope, and when the scope is disposed, those objects are returned to the container.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> The dependency scope.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> IDependencyScope <span class="title">BeginScope</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">return</span> (IDependencyScope)(<span class="built_in">object</span>)<span class="keyword">new</span> AutofacWebApiDependencyScope((_configurationAction == <span class="literal">null</span>) ? _container.BeginLifetimeScope(MatchingScopeLifetimeTags.RequestLifetimeScopeTag) : _container.BeginLifetimeScope(MatchingScopeLifetimeTags.RequestLifetimeScopeTag, _configurationAction));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Performs application-defined tasks associated with freeing, releasing, or resetting unmanaged resources.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		Dispose(disposing: <span class="literal">true</span>);</span><br><span class="line">		GC.SuppressFinalize(<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> Releases unmanaged and - optionally - managed resources.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;disposing&quot;&gt;</span></span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;see langword=&quot;true&quot; /&gt;</span> to release both managed and unmanaged resources;</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;see langword=&quot;false&quot; /&gt;</span> to release only unmanaged resources.</span></span><br><span class="line">	<span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"><span class="built_in">bool</span> disposing</span>)</span></span><br><span class="line"><span class="function"></span>	&#123;</span><br><span class="line">		<span class="keyword">if</span> (!_disposed)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (disposing &amp;&amp; _rootDependencyScope != <span class="literal">null</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				((IDisposable)_rootDependencyScope).Dispose();</span><br><span class="line">			&#125;</span><br><span class="line">			_disposed = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‚è€ƒï¼š<br></p>
<ul>
<li>GitHub - FreeSqlï¼š<a target="_blank" rel="noopener" href="https://github.com/2881099/FreeSql">2881099/FreeSql</a><br></li>
<li>GitHub - Unity: <a target="_blank" rel="noopener" href="https://github.com/unitycontainer/unity">unitycontainer/unity</a><br></li>
<li>GitHub - Autofac: <a target="_blank" rel="noopener" href="https://github.com/autofac/Autofac">autofac/Autofac</a><br></li>
<li>MSDN - ASP.NET Web API: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/aspnet/web-api/">ASP.NET Web API</a><br></li>
<li>Autofac ä¸­æ–‡æ–‡æ¡£: <a target="_blank" rel="noopener" href="https://autofaccn.readthedocs.io/zh/latest/index.html">æ¬¢è¿æ¥åˆ° Autofac ä¸­æ–‡æ–‡æ¡£!</a></li>
</ul>
</blockquote>
<blockquote>
<p>æºç ä¸‹è½½ï¼š<br></p>
<ul>
<li>Giteaï¼š<a target="_blank" rel="noopener" href="https://git.hd2y.net/hd2y/JohnSun.SOA.WebAPI">JohnSun.SOA.WebAPI</a><br></li>
<li>ç™¾åº¦ç½‘ç›˜ï¼š<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/17Nel1LWA8NFFRGD4iNiS-w">é“¾æ¥</a>  æå–ç ï¼š60u5</li>
</ul>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/soa-asp-dot-net-web-api-di/" data-id="cklc09aoe00bj1cnihjyfdmvx" data-title="SOA â€”â€” ASP.NET Web API ä¾èµ–æ³¨å…¥" class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Autofac/" rel="tag">Autofac</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SOA/" rel="tag">SOA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity/" rel="tag">Unity</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebApi/" rel="tag">WebApi</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" rel="tag">ä¾èµ–æ³¨å…¥</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/picture-drawing-of-beckman-dxh800-blood-cell-instrument/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">å‰ä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          è´å…‹æ›¼ DxH800 è¡€çƒä»ªå›¾ç‰‡ç»˜åˆ¶é—®é¢˜
        
      </div>
    </a>
  
  
    <a href="/macos-use-dbeaver-to-connect-to-oracle-databases/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">åä¸€ç¯‡</strong>
      <div class="article-nav-title">MacOS ä½¿ç”¨ DBeaver è¿æ¥ Oracle æ•°æ®åº“</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†ç±»</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/">å¼€å‘</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/C/ASP-NET-Core/">ASP.NET Core</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/C/WPF/">WPF</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E4%B8%9A%E5%8A%A1/">ä¸šåŠ¡</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%9F%BA%E7%A1%80/">åŸºç¡€</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%B7%A5%E5%85%B7/">å·¥å…·</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle/">Oracle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/PostgreSQL/">PostgreSQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/SQLite/">SQLite</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%9D%82%E8%B0%88/">æ‚è°ˆ</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">æ“ä½œç³»ç»Ÿ</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/MacOS/">MacOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%B7%A5%E5%85%B7/">å·¥å…·</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BD%AF%E4%BB%B6/">è½¯ä»¶</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/">æ—¥å¿—</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/%E5%85%AC%E5%91%8A/">å…¬å‘Š</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/%E5%BC%80%E7%AE%B1/">å¼€ç®±</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/%E6%9D%82%E8%B0%88/">æ‚è°ˆ</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET-Standard/" rel="tag">.NET Standard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOP/" rel="tag">AOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASCII/" rel="tag">ASCII</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActiveX/" rel="tag">ActiveX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Attribute/" rel="tag">Attribute</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Autofac/" rel="tag">Autofac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFG/" rel="tag">BFG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCProxy/" rel="tag">CCProxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DBeaver/" rel="tag">DBeaver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Expression/" rel="tag">Expression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fody/" rel="tag">Fody</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDI/" rel="tag">GDI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitea/" rel="tag">Gitea</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HIS/" rel="tag">HIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HongYang/" rel="tag">HongYang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDE/" rel="tag">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IE/" rel="tag">IE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jint/" rel="tag">Jint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Json/" rel="tag">Json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kindle/" rel="tag">Kindle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LIS/" rel="tag">LIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LODOP/" rel="tag">LODOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MVC/" rel="tag">MVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOS/" rel="tag">MacOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Math/" rel="tag">Math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NHibernate/" rel="tag">NHibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nexus3/" rel="tag">Nexus3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NuGet/" rel="tag">NuGet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SOA/" rel="tag">SOA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/" rel="tag">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/" rel="tag">TCP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Telegram/" rel="tag">Telegram</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TreeView/" rel="tag">TreeView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tuple/" rel="tag">Tuple</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/" rel="tag">UI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/" rel="tag">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity/" rel="tag">Unity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/" rel="tag">VS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ValueTuple/" rel="tag">ValueTuple</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WCF/" rel="tag">WCF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WPF/" rel="tag">WPF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebApi/" rel="tag">WebApi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebService/" rel="tag">WebService</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WinForm/" rel="tag">WinForm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows-XP/" rel="tag">Windows XP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xml/" rel="tag">Xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decimal/" rel="tag">decimal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frp/" rel="tag">frp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbc/" rel="tag">jdbc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mstsc/" rel="tag">mstsc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%B2%E5%8F%A3/" rel="tag">ä¸²å£</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">ä»£ç†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" rel="tag">ä¾èµ–æ³¨å…¥</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%83%E7%BB%84/" rel="tag">å…ƒç»„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86/" rel="tag">åŠ å¯†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93/" rel="tag">åŠ¨æ€é“¾æ¥åº“</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8D%E5%B0%84/" rel="tag">åå°„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">å¤šçº¿ç¨‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A7%94%E6%89%98/" rel="tag">å§”æ‰˜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">å·¥å…·</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B4%E9%BE%84/" rel="tag">å¹´é¾„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" rel="tag">åºåˆ—åŒ–</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%83%E5%85%83/" rel="tag">å¼ƒå…ƒ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%93%E5%8D%B0/" rel="tag">æ‰“å°</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">æ—¥å¿—</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/" rel="tag">æ„é€ å‡½æ•°</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0/" rel="tag">ææ„å‡½æ•°</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%9A%E4%B8%BE/" rel="tag">æšä¸¾</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99/" rel="tag">æ­£åˆ™</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%9B%E5%9E%8B/" rel="tag">æ³›å‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">çˆ¬è™«</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%91%9E%E7%BE%8E/" rel="tag">ç‘ç¾</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">è™šæ‹Ÿæœº</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%80%E7%90%83%E4%BB%AA/" rel="tag">è¡€çƒä»ª</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%A3%E6%9E%84%E5%87%BD%E6%95%B0/" rel="tag">è§£æ„å‡½æ•°</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">è®¾è®¡æ¨¡å¼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E8%AF%95/" rel="tag">è°ƒè¯•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%85%8B%E6%9B%BC/" rel="tag">è´å…‹æ›¼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BA%AB%E4%BB%BD%E8%AF%81%E8%AF%BB%E5%8D%A1/" rel="tag">èº«ä»½è¯è¯»å¡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">è½¯ä»¶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9C%E7%A8%8B/" rel="tag">è¿œç¨‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AA%E9%80%80/" rel="tag">é—ªé€€</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">é¡¹ç›®</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/NET-Standard/" style="font-size: 10px;">.NET Standard</a> <a href="/tags/AOP/" style="font-size: 10px;">AOP</a> <a href="/tags/ASCII/" style="font-size: 10px;">ASCII</a> <a href="/tags/ActiveX/" style="font-size: 10px;">ActiveX</a> <a href="/tags/Attribute/" style="font-size: 10px;">Attribute</a> <a href="/tags/Autofac/" style="font-size: 10px;">Autofac</a> <a href="/tags/BFG/" style="font-size: 10px;">BFG</a> <a href="/tags/CCProxy/" style="font-size: 10px;">CCProxy</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/DBeaver/" style="font-size: 12.5px;">DBeaver</a> <a href="/tags/Expression/" style="font-size: 10px;">Expression</a> <a href="/tags/Fody/" style="font-size: 10px;">Fody</a> <a href="/tags/GDI/" style="font-size: 10px;">GDI</a> <a href="/tags/Git/" style="font-size: 12.5px;">Git</a> <a href="/tags/GitHub/" style="font-size: 12.5px;">GitHub</a> <a href="/tags/Gitea/" style="font-size: 10px;">Gitea</a> <a href="/tags/HIS/" style="font-size: 12.5px;">HIS</a> <a href="/tags/HongYang/" style="font-size: 10px;">HongYang</a> <a href="/tags/IDE/" style="font-size: 10px;">IDE</a> <a href="/tags/IE/" style="font-size: 10px;">IE</a> <a href="/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/tags/Jint/" style="font-size: 12.5px;">Jint</a> <a href="/tags/Json/" style="font-size: 10px;">Json</a> <a href="/tags/Kindle/" style="font-size: 10px;">Kindle</a> <a href="/tags/LIS/" style="font-size: 15px;">LIS</a> <a href="/tags/LODOP/" style="font-size: 10px;">LODOP</a> <a href="/tags/MVC/" style="font-size: 10px;">MVC</a> <a href="/tags/MacOS/" style="font-size: 10px;">MacOS</a> <a href="/tags/Math/" style="font-size: 10px;">Math</a> <a href="/tags/NHibernate/" style="font-size: 10px;">NHibernate</a> <a href="/tags/Nexus3/" style="font-size: 10px;">Nexus3</a> <a href="/tags/Note/" style="font-size: 10px;">Note</a> <a href="/tags/NuGet/" style="font-size: 10px;">NuGet</a> <a href="/tags/OOP/" style="font-size: 10px;">OOP</a> <a href="/tags/Oracle/" style="font-size: 10px;">Oracle</a> <a href="/tags/SOA/" style="font-size: 17.5px;">SOA</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/TCP/" style="font-size: 10px;">TCP</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/TreeView/" style="font-size: 10px;">TreeView</a> <a href="/tags/Tuple/" style="font-size: 10px;">Tuple</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/UML/" style="font-size: 10px;">UML</a> <a href="/tags/Unity/" style="font-size: 10px;">Unity</a> <a href="/tags/VS/" style="font-size: 10px;">VS</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/ValueTuple/" style="font-size: 10px;">ValueTuple</a> <a href="/tags/WCF/" style="font-size: 12.5px;">WCF</a> <a href="/tags/WPF/" style="font-size: 10px;">WPF</a> <a href="/tags/WebApi/" style="font-size: 15px;">WebApi</a> <a href="/tags/WebService/" style="font-size: 15px;">WebService</a> <a href="/tags/WinForm/" style="font-size: 10px;">WinForm</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/Windows-XP/" style="font-size: 12.5px;">Windows XP</a> <a href="/tags/Xml/" style="font-size: 10px;">Xml</a> <a href="/tags/decimal/" style="font-size: 10px;">decimal</a> <a href="/tags/frp/" style="font-size: 10px;">frp</a> <a href="/tags/jdbc/" style="font-size: 10px;">jdbc</a> <a href="/tags/mstsc/" style="font-size: 10px;">mstsc</a> <a href="/tags/%E4%B8%B2%E5%8F%A3/" style="font-size: 10px;">ä¸²å£</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 12.5px;">ä»£ç†</a> <a href="/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">ä¾èµ–æ³¨å…¥</a> <a href="/tags/%E5%85%83%E7%BB%84/" style="font-size: 12.5px;">å…ƒç»„</a> <a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 10px;">åŠ å¯†</a> <a href="/tags/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93/" style="font-size: 10px;">åŠ¨æ€é“¾æ¥åº“</a> <a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 10px;">åå°„</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 20px;">å¤šçº¿ç¨‹</a> <a href="/tags/%E5%A7%94%E6%89%98/" style="font-size: 10px;">å§”æ‰˜</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">å·¥å…·</a> <a href="/tags/%E5%B9%B4%E9%BE%84/" style="font-size: 10px;">å¹´é¾„</a> <a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 10px;">åºåˆ—åŒ–</a> <a href="/tags/%E5%BC%83%E5%85%83/" style="font-size: 10px;">å¼ƒå…ƒ</a> <a href="/tags/%E6%89%93%E5%8D%B0/" style="font-size: 10px;">æ‰“å°</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 10px;">æ—¥å¿—</a> <a href="/tags/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/" style="font-size: 10px;">æ„é€ å‡½æ•°</a> <a href="/tags/%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0/" style="font-size: 10px;">ææ„å‡½æ•°</a> <a href="/tags/%E6%9E%9A%E4%B8%BE/" style="font-size: 10px;">æšä¸¾</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 15px;">æ­£åˆ™</a> <a href="/tags/%E6%B3%9B%E5%9E%8B/" style="font-size: 12.5px;">æ³›å‹</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 10px;">çˆ¬è™«</a> <a href="/tags/%E7%91%9E%E7%BE%8E/" style="font-size: 10px;">ç‘ç¾</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 12.5px;">è™šæ‹Ÿæœº</a> <a href="/tags/%E8%A1%80%E7%90%83%E4%BB%AA/" style="font-size: 10px;">è¡€çƒä»ª</a> <a href="/tags/%E8%A7%A3%E6%9E%84%E5%87%BD%E6%95%B0/" style="font-size: 10px;">è§£æ„å‡½æ•°</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12.5px;">è®¾è®¡æ¨¡å¼</a> <a href="/tags/%E8%B0%83%E8%AF%95/" style="font-size: 10px;">è°ƒè¯•</a> <a href="/tags/%E8%B4%9D%E5%85%8B%E6%9B%BC/" style="font-size: 10px;">è´å…‹æ›¼</a> <a href="/tags/%E8%BA%AB%E4%BB%BD%E8%AF%81%E8%AF%BB%E5%8D%A1/" style="font-size: 10px;">èº«ä»½è¯è¯»å¡</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 10px;">è½¯ä»¶</a> <a href="/tags/%E8%BF%9C%E7%A8%8B/" style="font-size: 10px;">è¿œç¨‹</a> <a href="/tags/%E9%97%AA%E9%80%80/" style="font-size: 10px;">é—ªé€€</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 10px;">é¡¹ç›®</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">åäºŒæœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">åä¸€æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">ä¹æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">äº”æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">å››æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">ä¸‰æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">äºŒæœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">ä¸€æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">åäºŒæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">åä¸€æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">åæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">ä¹æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">å…«æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">ä¸ƒæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">å››æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">ä¸‰æœˆ 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/csharp-expression-script-evaluation-problems/">C# ä¸­è¡¨è¾¾å¼è®¡ç®—é—®é¢˜</a>
          </li>
        
          <li>
            <a href="/aspnet-core-001-source-code-compilation-and-debugging/">ASP.NET Core - 001 æºç ç¼–è¯‘ä¸è°ƒè¯•</a>
          </li>
        
          <li>
            <a href="/aspnet-core-000-development-environment-configuration/">ASP.NET Core - 000 å¼€å‘ç¯å¢ƒé…ç½®</a>
          </li>
        
          <li>
            <a href="/dotnet-core-migration-web-service/">è¿ç§» Web Service é¡¹ç›®åˆ° .NET Core</a>
          </li>
        
          <li>
            <a href="/his-development-environment/">ç¯å¢ƒéƒ¨ç½²</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 hd2y<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>