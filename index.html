<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>华灯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="盈月舞清风，华灯自摇曳。">
<meta property="og:type" content="website">
<meta property="og:title" content="华灯">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="华灯">
<meta property="og:description" content="盈月舞清风，华灯自摇曳。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hd2y">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="华灯" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">华灯</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-210223-instrument-communication" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/instrument-communication/" class="article-date">
  <time class="dt-published" datetime="2021-02-23T01:44:37.000Z" itemprop="datePublished">2021-02-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/%E4%B8%9A%E5%8A%A1/">业务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/instrument-communication/">检验仪器常见通信方案</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、串口"><a href="#一、串口" class="headerlink" title="一、串口"></a>一、串口</h2><h3 id="串口通信"><a href="#串口通信" class="headerlink" title="串口通信"></a>串口通信</h3><p>串口通信（Serial Communication）的概念非常简单，串口按位（bit）发送和接收字节的通信方式。</p>
<p>串口通信最重要的参数是波特率、数据位、停止位和奇偶校验，对于两个进行通信的端口，这些参数必须匹配。</p>
<p>RS-232 标准是电气通信中最常见的串行连接标准，所以工作中串口通信一般都是RS-232协议通信，而在系统中或一些调试工具中通信端口也会称之为COM口（Cluster communication port）即串行通信端口。</p>
<p>RS-232 是美国电子工业联盟（EIA）制定的串行数据通信的接口标准，原始编号全称是 EIA-RS-232（简称 232，RS232）。它被广泛用于计算机串行接口外设连接。</p>
<h3 id="RS-232-设置："><a href="#RS-232-设置：" class="headerlink" title="RS-232 设置："></a>RS-232 设置：</h3><p>串口号：所使用的串行接口。常见如 COM1、COM2。</p>
<p>波特率：是指从一设备发到另一设备的波特率，即每秒钟多少符號。典型的波特率是 300, 1200, 2400, 9600, 19200, 115200 等。一般通信两端设备都要设为相同的波特率，但有些设备也可设置为自动检测波特率。</p>
<p>校验位：是用来验证数据的正确性。常见如 NONE 、ODD 、EVEN。</p>
<p>数据位：数据位紧跟在起始位之后，是通信中的真正有效信息。数据位的位数由通信双方共同约定，一般可以是 6 位、7 位或 8 位，比如标准的 ASCII 码是 0<del>127（7 位），扩展的 ASCII 码是 0</del>255（8 位）。</p>
<p>停止位：停止位在最后，用以标志一个字符传送的结束，对应于逻辑 1（高电平）状态。停止位可以是 1 位、1.5 位或 2 位。</p>
<h3 id="硬件连接"><a href="#硬件连接" class="headerlink" title="硬件连接"></a>硬件连接</h3><p>实际连接中，我们可以通过设备后方的串口端口完成连接。</p>
<p>但是需要注意的是，建议由仪器工程师完成连接工作，LIS 开发人员再进行调试测试。</p>
<p>如果没有仪器工程师指导，自行连接，需要将连接的仪器和电脑关闭断电后再操作，否则可能因为连接时的电流，烧坏硬件设备。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/instrument-communication-01-6e3bf374a85e4f6ea6c1b771d5a1bf13.png" alt="instrument-communication-01"></p>
<p>如上图为电脑上的串口端口，以及连接需要使用的线材。如果没有串口端口，可以考虑使用 USB 转串口的转接线，但是这类设备可能会因为驱动或兼容问题，不够稳定。</p>
<h3 id="软件驱动"><a href="#软件驱动" class="headerlink" title="软件驱动"></a>软件驱动</h3><p>在某些情况下，硬件连接将不适用。例如开发人员调试、仪器软件与 LIS 系统部署在同一台电脑，这时如果考虑购置双串口的电脑自然是不合理的。</p>
<p>建议可以考虑使用软件驱动，可以使用 VSPD 工具虚拟串口：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/instrument-communication-02-e8782f4a7d28458aadabddf952c2a703.png" alt="instrument-communication-02"></p>
<h3 id="发送-接收数据"><a href="#发送-接收数据" class="headerlink" title="发送/接收数据"></a>发送/接收数据</h3><p>发送或接收数据这里建议使用一款名为【串口调试助手 SComAssistant V2.2】的工具。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/instrument-communication-03-63889c1d5f4c402dacd3ca761a18c9f3.png" alt="instrument-communication-03"></p>
<p>该工具可以实现一些较为简单的数据收、发操作，基本能够满足需求，如果不满足需要还可以考虑 AccessPort 等工具。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/instrument-communication-04-d3311182020a440eb2974f088161aa81.png" alt="instrument-communication-04"></p>
<p>推荐 AccessPort 工具的另外一个原因是，其还可以作为一个监控工具使用，即类似“抓包工具”来使用。</p>
<p>以上串口工具已经打包，可以直接下载: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1CqcharAtWJLifPI0dSRSQA">https://pan.baidu.com/s/1CqcharAtWJLifPI0dSRSQA</a>  密码: 5q2g</p>
<h2 id="二、网口"><a href="#二、网口" class="headerlink" title="二、网口"></a>二、网口</h2><h3 id="网口通信"><a href="#网口通信" class="headerlink" title="网口通信"></a>网口通信</h3><p>网口通信即通过以太网连接到仪器，进行数据的传输的通信方式。</p>
<p>因为绝大多数使用 TCP/IP 协议进行通信，所以一般指基于 TCP/IP 协议进行数据传输的通信方式。</p>
<p>而 Socket 通信与 TCP/IP 协议都是基础知识，这里不再展开叙述。</p>
<h3 id="硬件连接-1"><a href="#硬件连接-1" class="headerlink" title="硬件连接"></a>硬件连接</h3><p>网线连接网口这种很基础的知识，这里应该不用再赘述了。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/instrument-communication-05-af7134a500384d22b56a276fd710b77f.png" alt="instrument-communication-05"></p>
<p>这里需要注意的是一个双网口电脑问题。</p>
<p>理论上仪器软件所在的电脑可以接入路由器，与 LIS 所在电脑在同一个局域网内，双方就可以通信。</p>
<p>但是部分仪器厂商会因为网络安全的问题，要求仪器软件不接入局域网，直接与 LIS 所在电脑直接连接。</p>
<p>这样仪器将会占用电脑的网口，所以只有采购双网口的电脑供 LIS 使用。</p>
<p>当然也可以考虑再采购一个外置网卡，但是考虑驱动与兼容性问题，建议采购时优先考虑双网口的电脑。</p>
<h3 id="发送-接收数据-1"><a href="#发送-接收数据-1" class="headerlink" title="发送/接收数据"></a>发送/接收数据</h3><p>网口的测试工具，这里推荐【TCP/UDP Socket 调试工具（Socket Tool）】：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/instrument-communication-06-6ebf6691f3674ee8b60168ebebbfe5da.png" alt="instrument-communication-06"></p>
<p>另外还有 sokit 工具，体验也不错：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/instrument-communication-07-e8112bb987354fbc80bf6620da40f712.png" alt="instrument-communication-07"></p>
<p>如果需要抓包，这里推荐 wireshark，使用教程建议参考博客园文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/mq0036/p/11187138.html">https://www.cnblogs.com/mq0036/p/11187138.html</a></p>
<p>以上网口工具已经打包，可以直接下载：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1SkbeDkbE0KN46Qp9ShNXuw">https://pan.baidu.com/s/1SkbeDkbE0KN46Qp9ShNXuw</a>  密码: cfhm</p>
<h3 id="三、其他"><a href="#三、其他" class="headerlink" title="三、其他"></a>三、其他</h3><p>一般主流仪器只会提供串口、网口两种通信方式。</p>
<p>但是如果是国产仪器，或者国内代理商对仪器软件进行了汉化，再或者实验室使用了第三方的 LIS 而且想保留，那么就可能需要考虑其他的对接方案。</p>
<p>例如希森美康血球仪国内代理商会安装 Laborman 与仪器连接，用户在没有使用 LIS 可以直接在该软件上出具报告。而如果需要与仪器连接就需要读取仪器输出的 cfd 后缀文件。</p>
<p>有些国内一些镜检仪器，软件上没有针对性的开发通信模块，而是提供数据库访问权限，让 LIS 直接读取他们软件的数据库。</p>
<p>而针对这些其他的连接方式，选择一个最简单、最稳定的选项即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/instrument-communication/" data-id="cklhh35zs005qyiqk4l6eer2v" data-title="检验仪器常见通信方案" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LIS/" rel="tag">LIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%B2%E5%8F%A3/" rel="tag">串口</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-210219-back-in-2020" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/back-in-2020/" class="article-date">
  <time class="dt-published" datetime="2021-02-18T20:36:00.000Z" itemprop="datePublished">2021-02-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%97%A5%E5%BF%97/">日志</a>►<a class="article-category-link" href="/categories/%E6%97%A5%E5%BF%97/%E6%9D%82%E8%B0%88/">杂谈</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/back-in-2020/">回顾2020年</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>不知不觉已经在杭州工作了近一年，交接圈有了一些变化，认识了很多很 NICE 的小伙伴，也慢慢适应了杭州的生活节奏。</p>
<p>但是当前这份工作不甚满意，公司内后端技术栈 C#、PHP、Java 中，目前过的最惨的也就是 C# 了，所以想在正式离职一些，总结一下过去一年的经历。</p>
<h2 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h2><h3 id="归纳总结"><a href="#归纳总结" class="headerlink" title="归纳总结"></a>归纳总结</h3><p>之前工作的团队有线上的云课堂，可以学习公司中的各个产品，开发也有各种文档可以学习，甚至文档的生产与学习称为了工作中的一个指标。</p>
<p>新的这份工作也有在线的 Wiki，是使用 Atlassian 部署，但是明显上面的内容就没法系统性的阅读与学习。</p>
<p>接收这份工作的第一件事情，就是花了半个月的时间整理了一份产品手册，并且学习源码。</p>
<p>当然后面也了解到所属团队的人手不足，没有余力做这些事情，但是一个优秀的团队一定要重视各类文档的输出，不能害怕或抗拒做这件事情。</p>
<h3 id="团队-Leader"><a href="#团队-Leader" class="headerlink" title="团队 Leader"></a>团队 Leader</h3><p>领导可以不懂技术，但是一定要尊重团队成员的选择。</p>
<p>经历过领导与研发团队争论数据库应该用 <code>SQL Server</code> 还是 <code>MySQL</code>，技术栈是升级到 <code>ASP.NET Core</code> 还是守着 <code>ASP.NET MVC</code>，一个小工具到底用 <code>Windows Form</code> 还是 <code>WPF</code> 等。</p>
<p>感叹不怕领导不懂这些，就怕领导遵循他所了解到过时的经验，来限制产品的进步。</p>
<p>领导可以不懂业务，但是一定要重视新产品与新业务的调研。</p>
<p>过去一年碰到最多的情况就是，这个产品或这个功能我明天就要。</p>
<p>当然最后经过”讨价还价“，会把时间延长到一周或者半个月，但是最后的结果都不理想，甚至可能因为破坏了现有的业务流程，要花费几个月的时间去摆平后续的烂摊子。</p>
<p>领导可以不善言谈，但是一定要言而有信，注意自己的言行举止。</p>
<p>……</p>
<p>太多的牢骚就发到这吧。</p>
<h3 id="逆流程的重要性"><a href="#逆流程的重要性" class="headerlink" title="逆流程的重要性"></a>逆流程的重要性</h3><p>之前第一份工作是传统的 HIS 企业，所以为了满足用户需求与缓解运维压力，比较重视逆流程与重要数据的更新。</p>
<p>但是，目前这个工作，因为之前产品设计不重视逆流程的原因，过去一年在后台改了太多的数据。</p>
<p>当然，经过努力，我把所负责的产品，功能慢慢都补全了，但是与其他产品线对接，仍然会因为这个出现一些问题。</p>
<p>比如，已经同步的订单删除了，比如订单的状态在我负责的产品回退了但是其他产品不能回退，比如订单信息更新了没有通知导致各系统信息不对称等等。</p>
<p>当然其他研发和产品普遍认为，这个操作是不合适的所以不考虑添加类似的功能，但是日常业务的确需要这样操作，没办法，只能后台修改数据。</p>
<p>其实这些是可以通过权限控制来避免一些错误的操作的，至少要让客服主管和后台管理员有这部分权限，否则只能大半夜被电话骚扰起床改数据了。</p>
<h3 id="职责划分"><a href="#职责划分" class="headerlink" title="职责划分"></a>职责划分</h3><p>如果工作环境需要多个部门，多个团队协作，应该都经历过相互甩锅与扯皮。</p>
<p>大家都希望做简单的事情，都希望承担最少的责任获取最大的收益。</p>
<p>所以并不是技术栈越多越好，产品线越多越好，一切都要有一个度。</p>
<p>另外就是工作职责，如果公司不重视技术运维、产品实施、技术支持这些岗位，那研发工作的开展将会很难或者说很累。</p>
<h2 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h2><h3 id="健康"><a href="#健康" class="headerlink" title="健康"></a>健康</h3><p>一个比我还年轻些的小伙伴今年住院了，其实前年体检的时候对应的指标就不正常，没有重视。</p>
<p>虽然保险买了不用担心生病后给家里增加负担，但是也要重视自己的身体健康，定期做做体检。</p>
<p>另外，体重的问题也要重视，加油减掉身上的赘肉。</p>
<h3 id="心态"><a href="#心态" class="headerlink" title="心态"></a>心态</h3><p>目前最焦虑的事情就是患上了：拖延症……</p>
<p>克服、克服、再克服吧！！！</p>
<h2 id="未来"><a href="#未来" class="headerlink" title="未来"></a>未来</h2><h3 id="学习进阶"><a href="#学习进阶" class="headerlink" title="学习进阶"></a>学习进阶</h3><p>工作真的不能被编程语言困住，目前还停留在 C# 中，但是工作机会越来越少，是时候考虑学习一些新的编程语言。</p>
<p>目前考虑是 Java、Go 与 Rust，后续再根据需求做一些调整吧。</p>
<p>另外也要把当前用过的技术栈，系统性的学习一下，例如 Redis、Elasticsearch、RabbitMQ 等。</p>
<p>极客时间、慕课网刷起来吧。</p>
<p>另外，博客最近更新太少了，过去一年学了很多东西，也该总结一下了。</p>
<p>GitHub 的绿墙也该刷起来了。</p>
<h3 id="生活的计划"><a href="#生活的计划" class="headerlink" title="生活的计划"></a>生活的计划</h3><p>因为社保的原因，车子暂时不可能上浙A的牌照了，房子也要再努力努力，但是是时候脱单了。(逃</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/back-in-2020/" data-id="cklhh35zq005myiqk9kz2brx6" data-title="回顾2020年" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-201207-csharp-expression-script-evaluation-problems" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/csharp-expression-script-evaluation-problems/" class="article-date">
  <time class="dt-published" datetime="2020-12-06T16:24:40.000Z" itemprop="datePublished">2020-12-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/csharp-expression-script-evaluation-problems/">C# 中表达式计算问题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>问题：计算公式为 <code>[A/G] = [ALB] / ([TP] - [ALB])</code>，已知 <code>[TP]</code> 与 <code>[ALB]</code> 的值，求得 <code>[A/G]</code>。</p>
<p>这是一个很简单的四则运算问题，下面将演示如何在 C# 代码中如何简单、高效的进行求解。</p>
<h2 id="一、解析算式"><a href="#一、解析算式" class="headerlink" title="一、解析算式"></a>一、解析算式</h2><p>首先，需要考虑的是如何将已知的内容，替换到表达式中，其实想必大家和我一样，想到了正则的替换：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 解析表达式内容</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;text&quot;&gt;</span>文本<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;values&quot;&gt;</span>需要替换的值<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>解析后的内容<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Parse</span>(<span class="params"><span class="built_in">string</span> text, Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; values</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> regex = <span class="keyword">new</span> Regex(<span class="string">@&quot;\[.+?\]&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> regex.Replace(text, match =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> values[match.Value];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后可以进行简单的测试：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">Fact</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ParseSuccess</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> text = <span class="string">&quot;[ALB] / ([TP] - [ALB])&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> values = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        &#123;<span class="string">&quot;[ALB]&quot;</span>, <span class="string">&quot;2.3&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;[TP]&quot;</span>, <span class="string">&quot;5.4&quot;</span>&#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> result = Expression.Parse(text, values);</span><br><span class="line">    Assert.Equal(<span class="string">&quot;2.3 / (5.4 - 2.3)&quot;</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="二、进行运算"><a href="#二、进行运算" class="headerlink" title="二、进行运算"></a>二、进行运算</h2><p>内容替换完成后，需要解析以上字符串，获取运算结果。网上会有一些讲解，如何用算法解析，再进行运算。</p>
<p>但复杂的算法不是我们追求的，我们要的是在尽可能简单的前提下完成运算工作。</p>
<p>以下介绍的是一些易用，且代码非常简单的解决方案。</p>
<h3 id="1-使用-DataTable-的-Computer-方法"><a href="#1-使用-DataTable-的-Computer-方法" class="headerlink" title="1. 使用 DataTable 的 Computer 方法"></a>1. 使用 DataTable 的 Computer 方法</h3><p>DataTable 大家应该非常熟悉，而 Computer 如果有使用过 DataTable 的聚合函数，应该也了解这个方法。</p>
<p>这里也是利用了 Computer 方法支持四则运算的特点：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> DataTable _table = <span class="keyword">new</span> DataTable();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">UseDataTableComputer</span>(<span class="params"><span class="built_in">string</span> exp</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> _table.Compute(exp, <span class="string">&quot;&quot;</span>).ToString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-使用数据库计算"><a href="#2-使用数据库计算" class="headerlink" title="2. 使用数据库计算"></a>2. 使用数据库计算</h3><p>数据库查询支持四则运算，这个是常识，所以同样的我们可以使用数据库查询获取四则运算结果。</p>
<p>如果采用这个方法，建议用 SQLite 的内存模式，不用担心数据库断连，导致查询出现问题。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> SQLiteConnection _conn;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> SQLiteConnection _connection</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (_conn == <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            _conn = <span class="keyword">new</span> SQLiteConnection(<span class="string">&quot;Data Source=:memory:;Version=3;&quot;</span>);</span><br><span class="line">            _conn.Open();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> _conn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">UseDatabase</span>(<span class="params"><span class="built_in">string</span> exp</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> (SQLiteCommand command = <span class="keyword">new</span> SQLiteCommand(<span class="string">$&quot;select <span class="subst">&#123;exp&#125;</span>&quot;</span>, _connection))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> command.ExecuteScalar().ToString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上使用 NuGet 引用引用了 <code>System.Data.SQLite.Core</code>。</p>
</blockquote>
<h3 id="3-使用-JavaScript-解析"><a href="#3-使用-JavaScript-解析" class="headerlink" title="3. 使用 JavaScript 解析"></a>3. 使用 JavaScript 解析</h3><p>说到 JavaScript 运行代码段，肯定想到了 <code>eval</code> 这个方法，而在 C# 中其实有很多开源的 JavaScript 解释器，可以运行 JavaScript 代码。</p>
<p>下面就是使用 Jint 实现的一个解决方案：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> JsValue _jsValue = <span class="keyword">new</span> Engine().Execute(<span class="string">@&quot;function calc(exp) &#123; return eval(exp); &#125;&quot;</span>).GetValue(<span class="string">&quot;calc&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">UseJavaScript</span>(<span class="params"><span class="built_in">string</span> exp</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> _jsValue.Invoke(exp).ToObject().ToString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上使用 NuGet 引用引用了 <code>Jint</code>。</p>
</blockquote>
<h3 id="4-使用-Math-NET-计算"><a href="#4-使用-Math-NET-计算" class="headerlink" title="4. 使用 Math.NET 计算"></a>4. 使用 <code>Math.NET</code> 计算</h3><p>如果有用 JavaScript 处理过一些复杂的数学问题，例如代数求解，应该知道 <code>algebra.js</code> 与 <code>math.js</code> 这两个库。</p>
<p>C# 同样有一个工具包，可以处理复杂的数学问题，就是 <a target="_blank" rel="noopener" href="https://github.com/mathnet">Math.NET Team (github.com)</a>。</p>
<p>而四则运算这样简单的问题自然不在话下，甚至感觉有点大材小用：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">UseMathNet</span>(<span class="params"><span class="built_in">string</span> exp</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> expression = SymbolicExpression.Parse(exp);</span><br><span class="line">    <span class="keyword">return</span> expression.Evaluate(<span class="literal">null</span>).RealValue.ToString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上使用 NuGet 引用引用了 <code>MathNet.Symbolics</code>。</p>
</blockquote>
<h3 id="5-使用-Liquid-计算"><a href="#5-使用-Liquid-计算" class="headerlink" title="5. 使用 Liquid 计算"></a>5. 使用 Liquid 计算</h3><p><code>liquid</code> 是一种开源的模板语言，类似 <code>Razor</code>，但是相对来说更简单、高效。</p>
<p>其支持四则运算，所以如果模板内容就是一个四则运算，输出的内容就是我们需要的结果：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">UseLiquid</span>(<span class="params"><span class="built_in">string</span> exp</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Template.Parse(<span class="string">$&quot;&#123;&#123;&#123;&#123;<span class="subst">&#123;exp&#125;</span>&#125;&#125;&#125;&#125;&quot;</span>).Render();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上使用 NuGet 引用引用了 <code>Scriban</code>。</p>
</blockquote>
<p><strong>注意：</strong> 以上使用的 <code>Jint</code>、<code>Math.NET</code>、<code>Scriban</code> 均在 GitHub 开源，如何使用也可以到 GitHub 了解，其实这里仅仅使用了它们最简单的一个功能，强烈推荐都了解一下，它们的功能在实际项目中还可以有更广泛的应用。</p>
<h2 id="三、测试"><a href="#三、测试" class="headerlink" title="三、测试"></a>三、测试</h2><p>xUnit 测试文件：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> Xunit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CalculationShould</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Theory</span>]</span><br><span class="line">    [<span class="meta">MemberData(nameof(TestData.List), MemberType = typeof(TestData))</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UseDataTableComputerPass</span>(<span class="params"><span class="built_in">string</span> exp, <span class="built_in">double</span> result</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">value</span> = Convert.ToDouble(Calculation.UseDataTableComputer(exp));</span><br><span class="line">        <span class="keyword">value</span> = Math.Round(<span class="keyword">value</span>, <span class="number">2</span>, MidpointRounding.AwayFromZero);</span><br><span class="line">        Assert.Equal(result, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Theory</span>]</span><br><span class="line">    [<span class="meta">MemberData(nameof(TestData.List), MemberType = typeof(TestData))</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UseDatabasePass</span>(<span class="params"><span class="built_in">string</span> exp, <span class="built_in">double</span> result</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">value</span> = Convert.ToDouble(Calculation.UseDatabase(exp));</span><br><span class="line">        <span class="keyword">value</span> = Math.Round(<span class="keyword">value</span>, <span class="number">2</span>, MidpointRounding.AwayFromZero);</span><br><span class="line">        Assert.Equal(result, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Theory</span>]</span><br><span class="line">    [<span class="meta">MemberData(nameof(TestData.List), MemberType = typeof(TestData))</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UseJavaScriptPass</span>(<span class="params"><span class="built_in">string</span> exp, <span class="built_in">double</span> result</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">value</span> = Convert.ToDouble(Calculation.UseJavaScript(exp));</span><br><span class="line">        <span class="keyword">value</span> = Math.Round(<span class="keyword">value</span>, <span class="number">2</span>, MidpointRounding.AwayFromZero);</span><br><span class="line">        Assert.Equal(result, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Theory</span>]</span><br><span class="line">    [<span class="meta">MemberData(nameof(TestData.List), MemberType = typeof(TestData))</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UseLiquidPass</span>(<span class="params"><span class="built_in">string</span> exp, <span class="built_in">double</span> result</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">value</span> = Convert.ToDouble(Calculation.UseLiquid(exp));</span><br><span class="line">        <span class="keyword">value</span> = Math.Round(<span class="keyword">value</span>, <span class="number">2</span>, MidpointRounding.AwayFromZero);</span><br><span class="line">        Assert.Equal(result, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Theory</span>]</span><br><span class="line">    [<span class="meta">MemberData(nameof(TestData.List), MemberType = typeof(TestData))</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UseMathNetPass</span>(<span class="params"><span class="built_in">string</span> exp, <span class="built_in">double</span> result</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">value</span> = Convert.ToDouble(Calculation.UseMathNet(exp));</span><br><span class="line">        <span class="keyword">value</span> = Math.Round(<span class="keyword">value</span>, <span class="number">2</span>, MidpointRounding.AwayFromZero);</span><br><span class="line">        Assert.Equal(result, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestData</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> List&lt;<span class="built_in">object</span>[]&gt; Data = <span class="keyword">new</span> List&lt;<span class="built_in">object</span>[]&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">object</span>[] &#123;<span class="string">&quot;1 + 2&quot;</span>, <span class="number">3.0</span>&#125;,</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">object</span>[] &#123;<span class="string">&quot;10.0 / (5 - 2)&quot;</span>, <span class="number">3.33</span>&#125;,</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">object</span>[] &#123;<span class="string">&quot;3.14&quot;</span>, <span class="number">3.14</span>&#125;,</span><br><span class="line">            <span class="keyword">new</span> <span class="built_in">object</span>[] &#123;<span class="string">&quot;1 + 2 * 3 / 4.0&quot;</span>, <span class="number">2.5</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> IEnumerable&lt;<span class="built_in">object</span>[]&gt; List =&gt; Data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试结果：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/calc-test-2a7b61d2a7ae47bbab8a1d6dcaa7e1bc.png" alt="calc-test"></p>
<h2 id="四、优缺点"><a href="#四、优缺点" class="headerlink" title="四、优缺点"></a>四、优缺点</h2><p>谈优缺点之前，首先看一下性能，测试代码如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        BenchmarkRunner.Run&lt;CalculationBenchmark&gt;(<span class="keyword">new</span> DebugInProcessConfig());</span><br><span class="line"></span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">RPlotExporter</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CalculationBenchmark</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;<span class="built_in">string</span>&gt; _exps = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt; &#123; <span class="string">&quot;1 + 2&quot;</span>, <span class="string">&quot;10.0 / (5 - 2)&quot;</span>, <span class="string">&quot;3.14&quot;</span>, <span class="string">&quot;1 + 2 * 3 / 4.0&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;<span class="built_in">string</span>&gt; <span class="title">UseDatabase</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> _exps.Select(exp =&gt; Calculation.UseDatabase(exp)).ToList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;<span class="built_in">string</span>&gt; <span class="title">UseDataTableComputer</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> _exps.Select(exp =&gt; Calculation.UseDataTableComputer(exp)).ToList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;<span class="built_in">string</span>&gt; <span class="title">UseJavaScript</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> _exps.Select(exp =&gt; Calculation.UseJavaScript(exp)).ToList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;<span class="built_in">string</span>&gt; <span class="title">UseLiquid</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> _exps.Select(exp =&gt; Calculation.UseLiquid(exp)).ToList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;<span class="built_in">string</span>&gt; <span class="title">UseMathNet</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> _exps.Select(exp =&gt; Calculation.UseMathNet(exp)).ToList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试结果如下：</p>
<table>
<thead>
<tr>
<th>Method</th>
<th align="right">Mean</th>
<th align="right">Error</th>
<th align="right">StdDev</th>
</tr>
</thead>
<tbody><tr>
<td>UseDatabase</td>
<td align="right">20.287 us</td>
<td align="right">0.3213 us</td>
<td align="right">0.2848 us</td>
</tr>
<tr>
<td>UseDataTableComputer</td>
<td align="right">4.210 us</td>
<td align="right">0.0643 us</td>
<td align="right">0.1093 us</td>
</tr>
<tr>
<td>UseJavaScript</td>
<td align="right">20.248 us</td>
<td align="right">0.1872 us</td>
<td align="right">0.1659 us</td>
</tr>
<tr>
<td>UseLiquid</td>
<td align="right">110.420 us</td>
<td align="right">1.7733 us</td>
<td align="right">1.8974 us</td>
</tr>
<tr>
<td>UseMathNet</td>
<td align="right">12.116 us</td>
<td align="right">0.1938 us</td>
<td align="right">0.1813 us</td>
</tr>
</tbody></table>
<p>可以看到在性能测试中，<code>DataTable</code> 的 <code>Computer</code> 方法表现最好，但是，更推荐用 <code>UseJavaScript</code> 与 <code>UseMathNet</code>。</p>
<p>原因如下：</p>
<ol>
<li><code>UseDataTableComputer</code> 只支持四则运算，如果遇到指数、对数等情况则无法进行运算。</li>
<li><code>UseDatabase</code>  需要依赖数据库，另外如果遇到整数运算，例如 <code>10 / 3</code>，默认是整除，暂时没有找到好的解决方案处理这个问题，这也是为什么上面的例子中每个算式都有浮点数。</li>
<li><code>UseLiquid</code> 应用中感觉和 <code>UseJavaScript</code> 很相似，所以在 <code>UseJavaScript</code> 表现更好的前提下，更推荐用后者。</li>
<li><code>UseMathNet</code> 有更好的性能，并且支持在算式中使用一些常量，例如 <code>e</code>、<code>π</code>，运算符也支持指数符号 <code>^</code>，但是只能处理与数学相关的问题（不支持位运算）。</li>
<li><code>UseJavaScript</code> 更灵活而且更方便测试，有更好的扩展性，但是复杂的运算需要使用函数来处理，不如 <code>UseMathNet</code>  易读。</li>
</ol>
<blockquote>
<p>备注：目前我是用 JavaScript，因为公式不是由客户维护，所以不需要开发编辑器，所有计算公式纯粹靠手撸。<br>目前碰到过最复杂的一个计算公式是：<code>100 * Math.sqrt(-12 + 2.38 * Math.LN2([T4]) + 0.0626 * Math.LN2([CA125Ⅱ]))/(1 + Math.sqrt(-12 + 2.38 * Math.LN2([T4]) + 0.0626 * Math.LN2([CA125Ⅱ])))</code>。<br>当然应用中还涉及一些其他的问题，比如 <code>[GLB] = [TP] / [ALB]</code>，<code>[A/G] = [ALB] / [GLB]</code>，需要用到递归进行处理；计算项因为浮点数精度的问题，所有结果都要指定小数位数等。这个后面有时间再慢慢补。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/csharp-expression-script-evaluation-problems/" data-id="cklhh35zo005iyiqk5sj4f4fz" data-title="C# 中表达式计算问题" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jint/" rel="tag">Jint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Math/" rel="tag">Math</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-201129-aspnet-core-001-source-code-compilation-and-debugging" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/aspnet-core-001-source-code-compilation-and-debugging/" class="article-date">
  <time class="dt-published" datetime="2020-11-29T12:34:56.000Z" itemprop="datePublished">2020-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/ASP-NET-Core/">ASP.NET Core</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/aspnet-core-001-source-code-compilation-and-debugging/">ASP.NET Core - 001 源码编译与调试</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、源码编译"><a href="#一、源码编译" class="headerlink" title="一、源码编译"></a>一、源码编译</h2><p>需要编译的源码的代码仓库有两个，一个是 <a target="_blank" rel="noopener" href="https://github.com/dotnet/aspnetcore">aspnetcore</a>，另外一个是 <a target="_blank" rel="noopener" href="https://github.com/dotnet/extensions">extensions</a>。</p>
<p>如果有代理，编译的过程比较简单，参考微软的文档进行编译即可。</p>
<ul>
<li><code>ASP.NET Core</code>：<a target="_blank" rel="noopener" href="https://github.com/dotnet/aspnetcore/blob/master/docs/BuildFromSource.md">Build ASP.NET Core from Source —— GitHub</a></li>
<li><code>.NET Extensions</code>：<a target="_blank" rel="noopener" href="https://github.com/dotnet/extensions/blob/master/docs/BuildFromSource.md">Build .NET Extensions from Source —— GitHub</a></li>
</ul>
<p>如果没有代理，那么整个编译流程可能非常慢，甚至无法正常进行，可以B站这个视频执行编译：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1964y1F7hQ">编译并调试 Asp.Net Core 源码 —— B站视频</a></p>
<p>如果使用代理软件，建议使用 Global（全局）代理，同时命令行与 Powershell 需要设置代理：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMD</span></span><br><span class="line"><span class="built_in">set</span> http_proxy=http://127.0.0.1:7890 &amp; <span class="built_in">set</span> https_proxy=http://127.0.0.1:7890</span><br><span class="line"></span><br><span class="line"><span class="comment"># Powershell</span></span><br><span class="line"><span class="variable">$Env</span>:http_proxy=<span class="string">&quot;http://127.0.0.1:7890&quot;</span>;<span class="variable">$Env</span>:https_proxy=<span class="string">&quot;http://127.0.0.1:7890&quot;</span></span><br></pre></td></tr></table></figure>
<p>编译时可能出现的错误：<code>C4819</code> 或其他的错误。实际代码是没有问题的，是编码的锅，解决方案：系统编码设置使用 <code>UTF-8</code>：</p>
<blockquote>
<p>系统设置 → 时间和语言 → 语言 → 相关设置 → 管理语言设置 → 管理 → 更改系统区域设置 → 勾选：使用 Unicode UTF-8 提供全球语言支持</p>
</blockquote>
<p>设置以后重启系统即可，网上反馈设置后部分软件可能出现乱码，目前我没发现类似问题。但是，我第一次设置后，系统所有图标丢失，部分软件无法正常使用，但是取消选项又重新勾选了一次就正常了，如果像我一样出现问题，可以多设置几次试试。</p>
<blockquote>
<p>补：发现了一个小问题，登录穿越火线，频道名、房间名、游戏玩家昵称的中文不显示了。/(ㄒoㄒ)/~~</p>
</blockquote>
<h2 id="二、调试"><a href="#二、调试" class="headerlink" title="二、调试"></a>二、调试</h2><p>后续需要学习 <code>ASP.NET Core</code>，并深入了解其实现原理，所以肯定希望能够直接调试源码。</p>
<p>这里提供两个调试方案，第一个方案是借助调试工具 dnSpy 来进行调试，第二则是直接使用 Visual Studio 进行调试。</p>
<h3 id="1-dnSpy-反编译调试"><a href="#1-dnSpy-反编译调试" class="headerlink" title="1. dnSpy 反编译调试"></a>1. dnSpy 反编译调试</h3><p>首先需要下载 dnSpy：<a target="_blank" rel="noopener" href="https://github.com/dnSpy/dnSpy">dnSpy/dnSpy: .NET debugger and assembly editor (github.com)</a>，解压后可以直接打开。</p>
<p>然后我们可以随意创建一个 <code>ASP.NET Core</code> 的示例项目，打开 Visual Studio Code，创建一个 MVC 项目并编译。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet new mvc -n 002_Debug</span><br><span class="line">dotnet build</span><br></pre></td></tr></table></figure>
<p>找到生成的 <code>002_Debug.dll</code> 拖到 dnSpy 中，找到程序入口设置断点并运行，即可进入调试：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/debug-with-dnspy-8dddc8ba484d41b487ddd11bd554bcd3.png" alt="debug-with-dnspy"></p>
<h3 id="2-源服务器支持"><a href="#2-源服务器支持" class="headerlink" title="2. 源服务器支持"></a>2. 源服务器支持</h3><p>首先如果是使用 Visual Studio Code，设置 <code>launch.json</code> 文件，增加如下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关闭 “仅我的代码” 项</span></span><br><span class="line">&quot;justMyCode&quot;: false,</span><br><span class="line">&quot;symbolOptions&quot;: &#123;</span><br><span class="line">  <span class="comment">//查找并下载symbol文件</span></span><br><span class="line">  &quot;searchMicrosoftSymbolServer&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/debug-with-vsc-7f07d5a6789c4356a83847d62bc689a0.png" alt="debug-with-vsc"></p>
<p>如果时使用 Visual Studio：</p>
<blockquote>
<p>选项 → 调试 → 常规 → 取消 “仅我的代码” 的勾选 → 勾选 “启用源链接支持”<br>选项 → 调试 → 符号 → 符号文件(.pdb)的位置 → 勾选 “Microsoft 符号服务器”</p>
</blockquote>
<p>配置完成后，调试时将会下载符号文件，可以正常调试 <code>ASP.NET Core</code> 的源代码。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/debug-with-vs-eb893b497ff2435b97be84efcca271ce.png" alt="debug-with-vs"></p>
<h3 id="3-使用源码调试"><a href="#3-使用源码调试" class="headerlink" title="3. 使用源码调试"></a>3. 使用源码调试</h3><p>首先是 <code>ASP.NET Core</code>，前文我们已经进行了编译，我们可以在 <code>\artifacts\installers\Debug</code> 找到 <code>aspnetcore-runtime-3.1.9-dev-win-x64.msi</code> 进行安装。</p>
<p>然后是 <code>.NET Extensions</code>，我们可以在项目中创建一个 <code>NuGet.config</code>，然后配置本地程序包源：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packageSources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">clear</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">add</span> <span class="attr">key</span>=<span class="string">&quot;local1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;C:\Users\hd2y\code\extensions\artifacts\packages\Debug\Shipping&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">add</span> <span class="attr">key</span>=<span class="string">&quot;local2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;C:\Users\hd2y\code\aspnetcore\artifacts\packages\Debug\Shipping&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">add</span> <span class="attr">key</span>=<span class="string">&quot;nuget.org&quot;</span> <span class="attr">value</span>=<span class="string">&quot;https://api.nuget.org/v3/index.json&quot;</span> <span class="attr">protocolVersion</span>=<span class="string">&quot;3&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">packageSources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这时，运行程序进入调试，就可以通过单步调试进入 <code>ASP.NET Core</code> 的源码。</p>
<p>如果以上操作无法正常调试，可以 F12 查看对应的方法的程序集版本。</p>
<p>例如我的程序集版本是 <code>3.1.10</code>，而我编译的 <code>ASP.NET Core</code> 的版本是 <code>3.1.9</code>，调试就无法正常进入。</p>
<p>这里有两种解决方案，第一种是查看 <code>3.1.9</code> 的版本对应的 <code>.NET SDK</code> 的版本进行安装，然后指定引用程序集的版本：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Project</span> <span class="attr">Sdk</span>=<span class="string">&quot;Microsoft.NET.Sdk.Web&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TargetFramework</span>&gt;</span>netcoreapp3.1<span class="tag">&lt;/<span class="name">TargetFramework</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RootNamespace</span>&gt;</span>_002_Debug<span class="tag">&lt;/<span class="name">RootNamespace</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">ItemGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">PackageReference</span> <span class="attr">Include</span>=<span class="string">&quot;Microsoft.Extensions.Hosting&quot;</span> <span class="attr">Version</span>=<span class="string">&quot;3.1.9&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ItemGroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>不指定版本的话，在我测试的时候不知道为什么转到定义程序集版本是 <code>3.1.8</code>，而不是文档中提到的 <code>3.1.9</code>。<br>直接指定会使用 <code>NuGet.config</code> 配置的本地程序包源，如果设置后发现仍旧不行，可能 NuGet 有缓存，需要在 选项 → NuGet 包管理器 → 常规 → 清除所有 NuGet 缓存。</p>
</blockquote>
<p>第二种方案是根据当前 <code>.NET SDK</code> 对应的 <code>ASP.NET Core</code> 版本，重新进行编译，具体版本对应关系可以查看 <code>.NET Core SDK</code> 的下载页：<a target="_blank" rel="noopener" href="https://dotnet.microsoft.com/download/dotnet-core/3.1">Download .NET Core 3.1 (Linux, macOS, and Windows) (microsoft.com)</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/aspnet-core-001-source-code-compilation-and-debugging/" data-id="cklhh35zm005fyiqkgu3kbnus" data-title="ASP.NET Core - 001 源码编译与调试" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B0%83%E8%AF%95/" rel="tag">调试</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-201122-aspnet-core-000-development-environment-configuration" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/aspnet-core-000-development-environment-configuration/" class="article-date">
  <time class="dt-published" datetime="2020-11-22T10:26:03.000Z" itemprop="datePublished">2020-11-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/ASP-NET-Core/">ASP.NET Core</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/aspnet-core-000-development-environment-configuration/">ASP.NET Core - 000 开发环境配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="IDE-推荐"><a href="#IDE-推荐" class="headerlink" title="IDE 推荐"></a>IDE 推荐</h2><p>主流的 C# 开发工具如下：</p>
<ul>
<li>Rider：收费、跨平台，习惯使用 JetBrains 家的产品首选。</li>
<li>Visual Studio：社区版免费、不支持跨平台，Windows 下首选。</li>
<li>Visual Studio Code：免费、跨平台、流行，配置、调试以及使用不及以上两个傻瓜化，有学习成本。</li>
</ul>
<h2 id="我的开发环境"><a href="#我的开发环境" class="headerlink" title="我的开发环境"></a>我的开发环境</h2><p>这里我的开发环境是：<code>Windows</code> + <code>Visual Studio Code</code> + <code>WSL 2</code>。</p>
<p>当然，我平时不这么用，因为 <code>Visual Studio 2019</code> 还是香的，但是接下来内容主要抱着学习的目的，这样的环境可以帮助我了解 <code>.NET Core</code> 的一些细节。</p>
<h3 id="Terminal-与-WSL-2"><a href="#Terminal-与-WSL-2" class="headerlink" title="Terminal 与 WSL 2"></a><code>Terminal</code> 与 <code>WSL 2</code></h3><p>该环境需要 <code>Windows 10</code> 版本不低于 <code>2004</code>，升级可以前往官网下载 <a target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/software-download/windows10">升级工具</a>。</p>
<p>安装 WSL 2 需要启用 <code>适用于 Linux 的 Windows 子系统</code> 选项，也可以使用 PowerShell 运行命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span><br></pre></td></tr></table></figure>
<p>接下来前往应用商店安装 <code>Ubuntu 20.04 LTS</code> 以及 <code>Windows Terminal</code>。</p>
<p>详细的 <code>Windows Terminal</code> 以及 <code>WSL 2</code> 安装美化参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/willick/p/13924325.html">Win10 Terminal + WSL 2 安装配置指南，精致开发体验 - 精致码农 - 博客园 (cnblogs.com)</a></p>
<h3 id="WSL-2-安装-NET-Core"><a href="#WSL-2-安装-NET-Core" class="headerlink" title="WSL 2 安装 .NET Core"></a><code>WSL 2</code> 安装 <code>.NET Core</code></h3><p>首先修改镜像源，修改 <code>sources.list</code> 文件，我的路径是：<code>C:\Users\hd2y\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\LocalState\rootfs\etc\apt</code></p>
<p>修改为阿里云的源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure>
<p>修改以后执行命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<p>然后安装 <code>.NET Core SDK</code>，分别需要执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 Microsoft 包签名密钥添加到受信任密钥列表，并添加包存储库</span></span><br><span class="line">wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb</span><br><span class="line">sudo dpkg -i packages-microsoft-prod.deb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 .NET SDK</span></span><br><span class="line">sudo apt-get update; \</span><br><span class="line">  sudo apt-get install -y apt-transport-https &amp;&amp; \</span><br><span class="line">  sudo apt-get update &amp;&amp; \</span><br><span class="line">  sudo apt-get install -y dotnet-sdk-5.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 .NET Core 3.1 SDK</span></span><br><span class="line">sudo apt-get install -y dotnet-sdk-3.1</span><br></pre></td></tr></table></figure>
<p>安装完成后可以运行 <code>dotnet --list-sdks</code> 命令查看已安装的 SDK ，可以运行 <code>dotnet --help</code> 命令查看帮助信息。</p>
<p>以上步骤安装完成以后，<code>dotnet</code> 命令使用的是 <code>.NET 5.0</code> 的 SDK，可以通过以下命令切换到 <code>.NET Core 3.1</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet new globaljson --sdk-version 3.1.404 --force</span><br></pre></td></tr></table></figure>
<p>以上命令会在文件夹创建一个 <code>global.json</code> 文件：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;sdk&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;3.1.404&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>详细的 <code>WSL 2</code> 中配置 <code>.NET Core</code> 开发环境可以参考系列文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/talentzemin/p/12575606.html">WSL 2 准备 .NET Core 开发环境 - luzemin - 博客园 (cnblogs.com)</a></p>
<h3 id="VS-Code-配置"><a href="#VS-Code-配置" class="headerlink" title="VS Code 配置"></a><code>VS Code</code> 配置</h3><p>需要安装的几个插件：</p>
<ul>
<li>C#</li>
<li>Visual Studio IntelliCode</li>
<li>.NET Core Test Explorer</li>
<li>vscode-solution-explorer</li>
<li>Remote - WSL</li>
</ul>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/vscode-keyboard-shortcuts-for-windows-acb5985293e84e8e8394611748d2d75f.png" alt="vscode-keyboard-shortcuts-for-windows"></p>
<p>具体使用 <code>Visual Studio Code</code> 开发 <code>.NET Core</code> 可以参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yilezhu/p/9926078.html">使用 Visual Studio Code 开发 .NET Core 看这篇就够了 - 依乐祝 - 博客园 (cnblogs.com)</a></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>创建一个控制台项目，输出经典的 <code>Hello world!</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir code</span><br><span class="line"><span class="built_in">cd</span> code</span><br><span class="line">mkdir 001_HelloWorld</span><br><span class="line"><span class="built_in">cd</span> 001_HelloWorld</span><br><span class="line">dotnet new console --name HelloWorld</span><br></pre></td></tr></table></figure>
<p>在 VS Code 中使用 <code>Ctrl + Shift + P</code> 搜索 <code>Remote-WSL: Open Folder in WSL</code>，打开我们新建项目所在的文件夹。</p>
<p>修改 Main 函数内容为：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine(Environment.OSVersion);</span><br><span class="line">Console.WriteLine(<span class="string">&quot;Hello World!&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>此时在终端输入 <code>dotnet run</code>，将打印：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Unix 4.4.0.19041</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/demo-41682b793120418fae6532bee902ae87.png" alt="demo"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/aspnet-core-000-development-environment-configuration/" data-id="cklhh35zk005byiqkdudm26j2" data-title="ASP.NET Core - 000 开发环境配置" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS/" rel="tag">VS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-200925-dotnet-core-migration-web-service" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/dotnet-core-migration-web-service/" class="article-date">
  <time class="dt-published" datetime="2020-09-25T09:59:53.000Z" itemprop="datePublished">2020-09-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/ASP-NET-Core/">ASP.NET Core</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/dotnet-core-migration-web-service/">迁移 Web Service 项目到 .NET Core</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>目前公司产品由 <code>.NET Framework</code> 升级到 <code>.NET Core</code> 过程中，因一部分对内或对外界接口使用的是 <code>Web Service</code>。</p>
<p>为了保证这些接口在升级后正常提供服务，开始考虑过使用 <a target="_blank" rel="noopener" href="https://github.com/DigDes/SoapCore">SoapCore</a> 对这些接口进行实现。</p>
<p>但是尝试之后发现 <code>SoapHeader</code> 问题不好解决，所以暂时放弃将 <code>Web Service</code> 迁移到 <code>.NET Core</code>，而是将 <code>Web Service</code> 进行独立部署。</p>
<p>最终开发时决定使用的方案有以下两种：</p>
<ol>
<li>“类库” 的目标框架调整为可供 <code>.NET Framework</code> 使用的 SDK，例如 <code>netstandard2.0</code>（使用 TargetFrameworks 指定多个依赖项也可），方便托管 Web Service 的 <code>ASP.NET Web</code> 网站使用；</li>
<li><code>.NET Core</code> 中提供 <code>Web API</code> 接口，<code>Web Service</code> 的项目内不涉及具体业务，将请求转发到 <code>.NET Core</code> 的项目中处理。</li>
</ol>
<blockquote>
<p>考虑到如果采用方案一，每次发布要发布两套程序，即 <code>.NET Core</code> 与 <code>ASP.NET Web</code>，并且使用 <code>Web Service</code> 转发消息产生的延迟可以接受，所以最终采用方案二来进行实现。</p>
</blockquote>
<p>接下来的内容最好了解一下 <code>*.csproj</code> 项目文件，可以参考：<a target="_blank" rel="noopener" href="https://blog.walterlv.com/post/understand-the-csproj.html">理解 C# 项目 csproj 文件格式的本质和编译流程</a></p>
<h2 id="创建项目并编辑项目文件"><a href="#创建项目并编辑项目文件" class="headerlink" title="创建项目并编辑项目文件"></a>创建项目并编辑项目文件</h2><p>首先我们需要创建一个 <code>.NET Standard</code> 的类库项目：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/netstandard-211e1250f9f7456194ff6f3c7684e769.png" alt="netstandard"></p>
<p>创建以后需要编辑我们的 <code>csproj</code> 项目文件，内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Project</span> <span class="attr">Sdk</span>=<span class="string">&quot;Microsoft.NET.Sdk&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TargetFramework</span>&gt;</span>net452<span class="tag">&lt;/<span class="name">TargetFramework</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">OutputPath</span>&gt;</span>bin\<span class="tag">&lt;/<span class="name">OutputPath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AppendTargetFrameworkToOutputPath</span>&gt;</span>false<span class="tag">&lt;/<span class="name">AppendTargetFrameworkToOutputPath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">PropertyGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">ItemGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Reference</span> <span class="attr">Include</span>=<span class="string">&quot;System.Web.Services&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ItemGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">Project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>配置文件中我们做了这些事情：</p>
<ul>
<li>TargetFramework：指定目标框架为 <code>.NET Framework 4.5.2</code>；</li>
<li>OutputPath：指定了生成文件的目录；</li>
<li>AppendTargetFrameworkToOutputPath：指定不附加目标框架到生成目录，不指定目录会是 <code>bin\net452\*</code>；</li>
<li>Reference：添加了 <code>Web Service</code> 所依赖的程序集；</li>
</ul>
<p>关于 <code>TargetFramework</code> 可以参考文档：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/standard/net-standard">.NET Standard</a></p>
<h2 id="增加-Web-Service-文件"><a href="#增加-Web-Service-文件" class="headerlink" title="增加 Web Service 文件"></a>增加 Web Service 文件</h2><p><code>Test.asmx</code> 文件内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ WebService Language&#x3D;&quot;C#&quot; CodeBehind&#x3D;&quot;Test.asmx.cs&quot; Class&#x3D;&quot;WebServiceTest.Test&quot; %&gt;</span><br></pre></td></tr></table></figure>
<p><code>Test.asmx.cs</code> 文件内容：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Net;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Web.Services;</span><br><span class="line"><span class="keyword">using</span> System.Web.Services.Protocols;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">WebServiceTest</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">WebService(Namespace = <span class="meta-string">&quot;http://tempuri.org/&quot;</span>)</span>]</span><br><span class="line">    [<span class="meta">WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)</span>]</span><br><span class="line">    [<span class="meta">System.ComponentModel.ToolboxItem(false)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Test</span> : <span class="title">System.Web.Services.WebService</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> TokenHeader TokenHeader &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">WebMethod</span>]</span><br><span class="line">        [<span class="meta">SoapHeader(<span class="meta-string">&quot;TokenHeader&quot;</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Get</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (TokenHeader == <span class="literal">null</span> || TokenHeader.Token != <span class="string">&quot;123&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;Error&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (WebClient client = <span class="keyword">new</span> WebClient())</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">var</span> data = client.DownloadData(<span class="string">&quot;https://api.lovelive.tools/api/SweetNothings&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> Encoding.UTF8.GetString(data);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TokenHeader</span> : <span class="title">SoapHeader</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Token &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上 <code>Web Service</code> 添加了一个简单的 <code>Get</code> 方法，当请求该方法并传入了正确的 <code>token</code>，服务将转发请求到 <code>Web API</code>，并将结果返回。</p>
<blockquote>
<p>可以直接从其他项目拷贝，因为没有模板，从项目中添加会稍麻烦一些。</p>
</blockquote>
<h2 id="添加-Web-config-文件"><a href="#添加-Web-config-文件" class="headerlink" title="添加 Web.config 文件"></a>添加 Web.config 文件</h2><p>了解 <code>ASP.NET MVC</code> 的大佬们对这个配置文件应该都很熟悉：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultDocument</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">files</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">add</span> <span class="attr">value</span>=<span class="string">&quot;Test.asmx&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">files</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultDocument</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">system.web</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">compilation</span> <span class="attr">debug</span>=<span class="string">&quot;true&quot;</span> <span class="attr">targetFramework</span>=<span class="string">&quot;4.5.2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">httpRuntime</span> <span class="attr">targetFramework</span>=<span class="string">&quot;4.5.2&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">system.web</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>稍稍调整了网站的默认文档为我们刚刚添加的 Web Service 服务，避免请求根目录出现 400 错误。</p>
<h2 id="增加用于调试的配置文件"><a href="#增加用于调试的配置文件" class="headerlink" title="增加用于调试的配置文件"></a>增加用于调试的配置文件</h2><p>项目中增加 <code>Properties</code> 文件夹，并创建 <code>launchSetting.json</code> 文件，内容如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;iisSettings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;windowsAuthentication&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;anonymousAuthentication&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;iisExpress&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;applicationUrl&quot;</span>: <span class="string">&quot;http://localhost:10880/&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;sslPort&quot;</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;profiles&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;IIS Express&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;commandName&quot;</span>: <span class="string">&quot;Executable&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;executablePath&quot;</span>: <span class="string">&quot;C:\\Program Files\\IIS Express\\iisexpress.exe&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;commandLineArgs&quot;</span>: <span class="string">&quot;/path:\&quot;$(SolutionDir)src\\$(ProjectName)\&quot; /port:10880&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;launchBrowser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;launchUrl&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;environmentVariables&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;ASPNETCORE_ENVIRONMENT&quot;</span>: <span class="string">&quot;Development&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该部分内容指定了 IIS Express 进行调试，因为我的解决方案中，Web 项目放在 <code>src</code> 文件夹下，所以命令行参数路径中加了 <code>src</code>，实际可能要根据自己的项目进行调整。</p>
<p>IIS Express 的命令行参数可以参考文档：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/iis/extensions/using-iis-express/running-iis-express-from-the-command-line">Running IIS Express from the Command Line</a></p>
<blockquote>
<p>不是必须添加这个文件，发布到 IIS，通过附加到 <code>w3wp</code> 进程的方式进行调试也是可以的。</p>
</blockquote>
<p>至此，托管了一个 Web Service 服务的网站项目就完成了：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/solution-items-905d0428d1b14d7f98a99d5d43b09bb2.png" alt="solution-items"></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>如果一切准备就绪后，无法正常运行调试，可能需要重启一下 VS。</p>
<p>正常开启调试以后，会弹出命令行：</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/iis-express-229bc369e24f47f5b2e990f32793b808.png" alt="iis-express"></p>
<p>这时我们在浏览器中可以通过 <a target="_blank" rel="noopener" href="http://localhost:10880/Test.asmx">http://localhost:10880/Test.asmx</a> 正常访问。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/test-f3ad79be66bd4bfd9e9cbf15bfb13cfe.png" alt="test"></p>
<p>而通过 Soap UI 测试，Web Service 也可以正常的运行。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/soap-ui-b855026d5e19427eb81961e59449ec25.png" alt="soap-ui"></p>
<p>至此，这篇文章正文就结束了，虽然没有解决 <code>Web Service</code> 的迁移问题，但是也给大家提供了一个解决思路，希望对大家能有所帮助。</p>
<p>源码已经提交到 github：<a target="_blank" rel="noopener" href="https://github.com/hd2y/WebServiceCore">https://github.com/hd2y/WebServiceCore</a></p>
<p>而接下来会出一篇使用将 <code>ASP.NET MVC</code> 的项目迁移到 <code>Microsoft.NET.Sdk</code> 的避坑说明。</p>
<p>虽然有些老项目不能快速迁移到 <code>ASP.NET Core MVC</code>，但是使用 <code>.NET Core SDK</code> 风格管理项目还是很香的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/dotnet-core-migration-web-service/" data-id="cklhh35zi0059yiqkg6tu6li7" data-title="迁移 Web Service 项目到 .NET Core" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebApi/" rel="tag">WebApi</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebService/" rel="tag">WebService</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-200526-his-development-environment" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/his-development-environment/" class="article-date">
  <time class="dt-published" datetime="2020-05-26T01:07:33.000Z" itemprop="datePublished">2020-05-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/his-development-environment/">环境部署</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h2><p>首先需要安装数据库，安装的版本必须是 <code>Oracle 11.2.0.4.0</code>。</p>
<p>安装完成后，需要创建两个用户：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> userhita170524 identified <span class="keyword">by</span> hishita;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,resource,dba <span class="keyword">to</span> userhita170524;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> useremr_hita170524 identified <span class="keyword">by</span> hita;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,resource,dba <span class="keyword">to</span> useremr_hita170524;</span><br></pre></td></tr></table></figure>
<p>用户创建完成后，使用 <code>imp</code> 导入数据前还需要创建表空间。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space USERS datafile <span class="string">&#x27;C:\app\oradata\USERS.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space MAIN datafile <span class="string">&#x27;C:\app\oradata\MAIN.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZICHAN datafile <span class="string">&#x27;C:\app\oradata\TSP_ZICHAN.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_WUZI datafile <span class="string">&#x27;C:\app\oradata\TSP_WUZI.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2012 datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2012.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XITONGCANSHU datafile <span class="string">&#x27;C:\app\oradata\TSP_XITONGCANSHU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_HYBASEFLAT datafile <span class="string">&#x27;C:\app\oradata\TSP_HYBASEFLAT.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_HYBASEFLAT_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_HYBASEFLAT_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XITONGCANSHU_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_XITONGCANSHU_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XITONGSHUJU datafile <span class="string">&#x27;C:\app\oradata\TSP_XITONGSHUJU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XITONGSHUJU_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_XITONGSHUJU_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_CPMIS datafile <span class="string">&#x27;C:\app\oradata\TSP_CPMIS.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_CPMIS_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_CPMIS_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_GRADING datafile <span class="string">&#x27;C:\app\oradata\TSP_GRADING.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_GRADING_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_GRADING_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_BASEFLAT datafile <span class="string">&#x27;C:\app\oradata\TSP_BASEFLAT.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_BASEFLAT_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_BASEFLAT_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space <span class="keyword">SYSTEM</span> datafile <span class="string">&#x27;C:\app\oradata\SYSTEM.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_HULIZHILIANG datafile <span class="string">&#x27;C:\app\oradata\TSP_HULIZHILIANG.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_HYFYSJ datafile <span class="string">&#x27;C:\app\oradata\TSP_HYFYSJ.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_HYFYSJ_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_HYFYSJ_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_LISSHUJU datafile <span class="string">&#x27;C:\app\oradata\TSP_LISSHUJU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_LISCANSHU datafile <span class="string">&#x27;C:\app\oradata\TSP_LISCANSHU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_LISSHUJU_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_LISSHUJU_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2017_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2017_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2018_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2018_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_LISCANSHU_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_LISCANSHU_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2015 datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2015.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2015_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2015_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2016 datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2016.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2016_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2016_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2017 datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2017.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2018 datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2018.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2015 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2015.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2015_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2015_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2016 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2016.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2016_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2016_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2017 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2017.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2017_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2017_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2018 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2018.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2020_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2020_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_MENZHEN2020 datafile <span class="string">&#x27;C:\app\oradata\TSP_MENZHEN2020.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_OA datafile <span class="string">&#x27;C:\app\oradata\TSP_OA.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_OA_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_OA_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_OAFILEIMG datafile <span class="string">&#x27;C:\app\oradata\TSP_OAFILEIMG.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_PAIDUI datafile <span class="string">&#x27;C:\app\oradata\TSP_PAIDUI.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_PAIDUI_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_PAIDUI_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_RANKAPPRAISAL datafile <span class="string">&#x27;C:\app\oradata\TSP_RANKAPPRAISAL.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space CRDS2 datafile <span class="string">&#x27;C:\app\oradata\CRDS2.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_TIJIAN datafile <span class="string">&#x27;C:\app\oradata\TSP_TIJIAN.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_TIJIAN_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_TIJIAN_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_WUZI_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_WUZI_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_WXSHUYE datafile <span class="string">&#x27;C:\app\oradata\TSP_WXSHUYE.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_WXSHUYE_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_WXSHUYE_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XUEYE datafile <span class="string">&#x27;C:\app\oradata\TSP_XUEYE.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XUEYE_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_XUEYE_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_HISWEB datafile <span class="string">&#x27;C:\app\oradata\TSP_HISWEB.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2015 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2015.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2015_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2015_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2016 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2016.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2017 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2017.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2018 datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2018.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_HISWEB_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_HISWEB_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHECANSHU datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHECANSHU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHECANSHU_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHECANSHU_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2016_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2016_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2017_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2017_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU2018_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU2018_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZHUYUAN2018_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_ZHUYUAN2018_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space USERS datafile <span class="string">&#x27;C:\app\oradata\USERS.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2017 datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2017.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2018 datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2018.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2019 datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2019.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2020 datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2020.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XITONGCANSHU datafile <span class="string">&#x27;C:\app\oradata\TSP_XITONGCANSHU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_XITONGCANSHU_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_XITONGCANSHU_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2017_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2017_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2018_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2018_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2019_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2019_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_EMR2020_IDX datafile <span class="string">&#x27;C:\app\oradata\TSP_EMR2020_IDX.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space TSP_ZONGHESHUJU datafile <span class="string">&#x27;C:\app\oradata\TSP_ZONGHESHUJU.dbf&#x27;</span> size <span class="number">50</span>M autoextend <span class="keyword">on</span> next <span class="number">10</span>M maxsize unlimited;</span><br></pre></td></tr></table></figure>
<p>表空间创建完成后，便可以恢复数据了：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\app\hd2y\product\<span class="number">11.2</span><span class="number">.0</span>\dbhome_1\BIN\imp userhita170524<span class="operator">/</span>hishita<span class="variable">@127</span><span class="number">.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>ORCL file<span class="operator">=</span>F:\Oracle\userhita170524.dmp log<span class="operator">=</span>F:\Oracle\userhita170524.log buffer<span class="operator">=</span><span class="number">819200</span> <span class="keyword">full</span><span class="operator">=</span>y</span><br><span class="line">C:\app\hd2y\product\<span class="number">11.2</span><span class="number">.0</span>\dbhome_1\BIN\imp useremr_hita170524<span class="operator">/</span>hita<span class="variable">@127</span><span class="number">.0</span><span class="number">.0</span><span class="number">.1</span><span class="operator">/</span>ORCL file<span class="operator">=</span>F:\Oracle\useremr_hita170524.dmp log<span class="operator">=</span>F:\Oracle\useremr_hita170524.log buffer<span class="operator">=</span><span class="number">819200</span> <span class="keyword">full</span><span class="operator">=</span>y</span><br></pre></td></tr></table></figure>
<p>至此，数据已经恢复，可以安装 <code>Web</code> 环境。</p>
<h2 id="安装-Web-环境"><a href="#安装-Web-环境" class="headerlink" title="安装 Web 环境"></a>安装 Web 环境</h2><p>将 <code>Web</code> 解压，建议解压到 <code>E:\HongYang</code> 下。</p>
<p>解压后，在 <code>IIS</code> 默认站点右键“添加应用程序”，别名输入 <code>his_hita</code>，应用程序池选择 <code>.NET v4.5 Classic</code>，物理路径选择刚刚解压文件的 web 路径下。</p>
<p>首先还需要到服务中，启动 <code>ASP.NET State Service</code> 服务，建议设置自动启动。</p>
<p>这时还不要着急访问，还需要到 <code>Web</code> 下，修改 <code>DBConfig.xml</code> 文件，调整数据库配置文件，并将对应的数据库配置文件的内容适当调整，修改 <code>tns</code>，如果用户名密码修改也应适当调整。</p>
<p>如果没有问题，可以使用 <a target="_blank" rel="noopener" href="http://127.0.0.1/his_hita/W_LIS/login.html">http://127.0.0.1/his_hita/W_LIS/login.html</a> 访问 <code>LIS</code> 登录界面。</p>
<p>如果出现问题，可以到 <a target="_blank" rel="noopener" href="http://127.0.0.1/his_hita/W_LIS/Common/PaddleCard.ashx?type=-1&id=0001">http://127.0.0.1/his_hita/W_LIS/Common/PaddleCard.ashx?type=-1&amp;id=0001</a> 测试，查看是否是数据库连接问题。</p>
<p>如果出现 <code>System.Data.OracleClient 需要 Oracle 客户端软件 version 8.1.7 或更高版本</code> 可以尝试以下操作：</p>
<ol>
<li>管理工具 → 计算机管理 → 本地用户和组 → 组 → <code>Administrators</code> 属性，添加 <code>NETWORK SERVICE</code>；</li>
<li><code>Oracle</code> 安装路径 → 属性 → 安全，添加 <code>NETWORK SERVICE</code> 允许完全控制，确定一下 <code>ORACLE</code> 下 <code>BIN</code> 目录有没有这个权限。</li>
<li>重启IIS。</li>
</ol>
<p>这时应该就可以解决数据库无法连接的问题。</p>
<h2 id="登录使用"><a href="#登录使用" class="headerlink" title="登录使用"></a>登录使用</h2><p><code>LIS</code> 需要在 <code>Chrome</code> 内核浏览器下访问，登录界面为：<a target="_blank" rel="noopener" href="http://127.0.0.1/his_hita/W_LIS/login.html">http://127.0.0.1/his_hita/W_LIS/login.html</a></p>
<p><code>HIS</code> 需要在 <code>IE</code> 下访问：<a target="_blank" rel="noopener" href="http://127.0.0.1/his_hita/">http://127.0.0.1/his_hita/</a></p>
<p>常用工号：</p>
<ul>
<li><code>2999</code>：医生</li>
<li><code>3999</code>：护士</li>
<li><code>4999</code>：收费</li>
<li><code>5999</code>：检验</li>
<li><code>8888</code>：信息科</li>
</ul>
<p>密码默认为 <code>0000</code>，如果错误可以将数据库内密码更新为 <code>0000</code> 即可访问。</p>
<p>需要注意的是，HIS 使用 IE 还需要设置添加兼容站点、设置安全站点、允许 ActiveX 控件控制、禁用弹窗拦截、禁用缓存等设置。</p>
<p>如果树形控件无法显示，需要按照文章 <a target="_blank" rel="noopener" href="https://www.hd2y.net/archives/display-problem-of-treeview-control-in-win10">Win10 中 TreeView 控件显示问题</a> 进行设置。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/his-development-environment/" data-id="cklhh35zg0055yiqk9ot5ey6s" data-title="环境部署" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HIS/" rel="tag">HIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HongYang/" rel="tag">HongYang</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LIS/" rel="tag">LIS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-200516-plantuml-installation-and-use" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/plantuml-installation-and-use/" class="article-date">
  <time class="dt-published" datetime="2020-05-16T06:27:44.000Z" itemprop="datePublished">2020-05-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/plantuml-installation-and-use/">PlantUML 的安装与使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>工作中经常需要输出一些文档，需要叙述产品的设计、研发、使用等。</p>
<p>如果只是文字，肯定显得很晦涩，所以最好是结合一些图表，方便读者理解。</p>
<p>之前绘图主要是使用 <code>Visio</code>，提供的模板很多，搭配 Office 套件使用很舒服。但是 <code>Visio</code> 需要单独购买安装，并且价格略贵。</p>
<p>之前在微信看到有人在讨论 <code>PlantUML</code>，就搜索试用了一下，虽然有学习成本，但是相比 <code>Visio</code> 的拖拽，我更喜欢 <code>PlantUML</code> 编码生成图形的方式。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><code>PlantUML</code> 的示例可以参考官方文档，这里建议使用 <code>VS Code</code> 搭配对应的扩展进行绘图。</p>
<p><code>PlantUML</code> 官方中文文档：<a target="_blank" rel="noopener" href="https://plantuml.com/zh/">https://plantuml.com/zh/</a>。</p>
<h3 id="安装-VS-Code-插件"><a href="#安装-VS-Code-插件" class="headerlink" title="安装 VS Code 插件"></a>安装 VS Code 插件</h3><p>直接在插件里搜索 <code>PlantUML</code>，然后进行安装即可。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/plantuml%20extension-e98aebd405bf42aabaa6140a51aff533.png" alt="plantuml extension"></p>
<h3 id="安装-Java-JDK"><a href="#安装-Java-JDK" class="headerlink" title="安装 Java JDK"></a>安装 Java JDK</h3><p>这里建议安装 <code>jdk8</code>，否则生成预览时，可能会有一些警告信息。</p>
<p><code>jdk8</code> 下载路径：<a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a>。</p>
<p>安装以后还需要配置系统环境变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME = <span class="string">&#x27;C:\Program Files\Java\jdk1.8.0_251&#x27;</span></span><br><span class="line">CLASSPATH = <span class="string">&#x27;.;%JAVA_HOME%\bin&#x27;</span></span><br><span class="line"><span class="comment">// 双击后选择“编辑文本” 然后将内容追加到最前</span></span><br><span class="line">Path = <span class="string">&#x27;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>如果没有问题，可以在 <code>cmd</code> 中使用 <code>java -version</code> 看看能否正常使用 <code>java</code> 命令。</p>
<h3 id="安装-Graphviz"><a href="#安装-Graphviz" class="headerlink" title="安装 Graphviz"></a>安装 Graphviz</h3><p>虽然安装以后已经可以完成部分图形的绘制，但是测试发现部分图例还需要使用 <code>Graphviz</code>。</p>
<p><code>Graphviz</code> 下载链接：<a target="_blank" rel="noopener" href="https://graphviz.gitlab.io/download/">https://graphviz.gitlab.io/download/</a>。</p>
<p>安装以后一样需要配置系统环境变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GRAPHVIZ_DOT = <span class="string">&#x27;C:\Program Files (x86)\Graphviz2.38\bin\dot.exe&#x27;</span></span><br><span class="line">GRAPHVIZ_INSTALL_DIR = <span class="string">&#x27;C:\Program Files (x86)\Graphviz2.38&#x27;</span></span><br><span class="line"><span class="comment">// 双击后新建</span></span><br><span class="line">Path = <span class="string">&#x27;C:\Program Files (x86)\Graphviz2.38\bin\&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="绘制预览与导出"><a href="#绘制预览与导出" class="headerlink" title="绘制预览与导出"></a>绘制预览与导出</h2><p>绘制可以参考前文提到的 <code>PlantUML</code> 的 <a target="_blank" rel="noopener" href="https://plantuml.com/zh/">中文文档</a>。</p>
<p>首先需要创建文件，需要注意的是支持的文件后缀名是 <code>*.wsd, *.pu, *.puml, *.plantuml, *.iuml</code>，否则没有高亮显示关键字、不能使用智能提示、无法使用格式化。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/edit%20uml%20diagram-1e44caaf640d4f90aaef16fde4c58743.png" alt="edit uml diagram"></p>
<p>预览需要使用快捷键：<code>Alt + D</code>。<br>内容格式化：<code>Shift + Alt + F</code>。</p>
<p>导出首先使用 <code>Ctrl + Shift + P</code>，输入 <code>PlantUML</code>，使用 <code>PlantUML: Export Current File Diagrams</code>。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/export%20diagram-cdff58005c58456f894b49ee7924820c.png" alt="export diagram"></p>
<blockquote>
<p>参考：</p>
<ul>
<li>PlantUML 官网：<a target="_blank" rel="noopener" href="https://plantuml.com/zh/">https://plantuml.com/zh/</a></li>
<li>GitHub：<a target="_blank" rel="noopener" href="https://github.com/qjebbs/vscode-plantuml">qjebbs / vscode-plantuml</a></li>
</ul>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/plantuml-installation-and-use/" data-id="cklhh35ze0053yiqkb8ydbxie" data-title="PlantUML 的安装与使用" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UML/" rel="tag">UML</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-200429-frp-access-the-intranet-computer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/frp-access-the-intranet-computer/" class="article-date">
  <time class="dt-published" datetime="2020-04-29T14:55:35.000Z" itemprop="datePublished">2020-04-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/frp-access-the-intranet-computer/">使用 frp 实现内网穿透访问内网电脑</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>远程办公的工具，一般会选择 TeamViewer 或者向日葵，但是这些都是收费工具。</p>
<p>免费的 TeamViewer 经常会被禁用，又不想用破解版，收费价格比较贵。向日葵虽然收费可以接收，但是使用过都知道，使用体验比 TeamViewer 差了太多。</p>
<p>我个人更倾向于使用 <code>mstsc</code>，但是访问公司内网电脑，就需要想办法穿透到内网来使用。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>后续的操作需要一台有公网 IP 的电脑或服务器，否则就可以跳过这篇文章了。</p>
<p>我的服务器系统为 <code>CentOS 7.6</code>，其他的可以参考，除了下载的程序包不同外，其他大同小异。</p>
<p>首先是下载安装包，下载地址：<a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/releases">https://github.com/fatedier/frp/releases</a>。</p>
<p>我下载的时候，最新发布版本是 <code>v0.33.0</code>，建议使用最新版。</p>
<p>因为我使用的服务器是 <code>CentOS</code>，所以要下载一个 <code>Linux</code> 的程序包。客户端是 <code>Windows 10</code>，需要下载一个 <code>Windows</code> 的程序包。</p>
<p>而 <code>Linux</code> 选项又那么多，如果不能确定可以先通过以下命令打印出服务器类型：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看服务器类型</span></span><br><span class="line">uname -m</span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure>
<p>如果输出是 <code>i386</code> 或 <code>i686</code> 需要下载 <code>386</code>，如果和我一样是 <code>x86_64</code> 需要下载 <code>amd64</code>，如果是 <code>arm</code> 需要选择 <code>arm64</code> 或 <code>arm</code>。</p>
<h2 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置"></a>服务端配置</h2><p>可以通过以下命令，下载并解压： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载 frp</span></span><br><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.33.0/frp_0.33.0_linux_amd64.tar.gz frp.tar.gz</span><br><span class="line"><span class="comment"># 解压到 frp 文件夹</span></span><br><span class="line">tar -zxvf frp.tar.gz --strip-components 1 -C ./frp</span><br></pre></td></tr></table></figure>
<p>解压完成后可以先查看解压的内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入解压目录</span></span><br><span class="line"><span class="built_in">cd</span> frp</span><br><span class="line"><span class="comment"># 列出文件夹内文件信息</span></span><br><span class="line">ls</span><br><span class="line">frpc_full.ini  frps  frps_full.ini  frps.ini  LICENSE  systemd</span><br></pre></td></tr></table></figure>
<p>很容易理解，<code>*.ini</code> 为配置文件，<code>frps</code> 为 <strong>s</strong> 结尾就是服务端，<code>frpc</code> 为 <strong>c</strong> 结尾就是客户端。</p>
<p>我们部署的是服务端，所以只需要关注 <code>frps.ini</code> 与 <code>frps</code>。</p>
<p>首先修改 <code>frps.ini</code> 配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改 frp 服务配置文件</span></span><br><span class="line">vim /root/frp/frps.ini</span><br></pre></td></tr></table></figure>
<p>内容如下：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">dashboard_port</span> = <span class="number">7500</span></span><br><span class="line"><span class="attr">token</span> = <span class="number">12345678</span></span><br><span class="line"><span class="attr">dashboard_user</span> = admin</span><br><span class="line"><span class="attr">dashboard_pwd</span> = <span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<p>配置节点的内容说明如下：</p>
<ul>
<li><code>bind_port</code>：服务端监听的端口，客户端配置的时候需要用到。</li>
<li><code>token</code>：就是一个平平无奇的 <code>token</code>，同样是配置客户端时要用到的。</li>
<li><code>dashboard_port</code>：状态面板的端口，服务启动以后可以通过该端口查看状态信息。</li>
<li><code>dashboard_user</code>：状态面板的登录用户名。</li>
<li><code>dashboard_pwd</code>：状态面板的登录密码。</li>
</ul>
<p>配置完成保存后，就可以通过该配置文件启动 <code>frp</code> 服务端了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动 frp 服务</span></span><br><span class="line">./frps -c frps.ini</span><br></pre></td></tr></table></figure>
<p>成功启动后，我们可以登录状态面板查看。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/frps%20bashboard-a59be7c170714d5f826b7a97416c1779.png" alt="frps bashboard"></p>
<p>此时虽然启动成功，但是如果我们 <code>Ctrl + C</code> 退出，程序也就跟着退出了，我们需要让该服务端后台运行，并且能够开机启动，就需要执行以下操作。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建后台启动模版</span></span><br><span class="line">vim /etc/systemd/system/frp.service</span><br></pre></td></tr></table></figure>
<p>该文件内容如下：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=frps</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">ExecStart</span>=/root/frp/frps -c /root/frp/frps.ini </span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure>
<p>配置完成就可以启动服务了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动测试</span></span><br><span class="line">systemctl start frp.service</span><br><span class="line"><span class="comment"># 查看启动状态</span></span><br><span class="line">systemctl status frp.service</span><br><span class="line"><span class="comment"># 开机自启</span></span><br><span class="line">systemctl <span class="built_in">enable</span> frp.service</span><br></pre></td></tr></table></figure>
<h2 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h2><p>客户端的话就需要调戏以下 <code>frpc.exe</code> 与 <code>frpc.ini</code> 了。</p>
<p><code>frpc.ini</code> 文件修改如下：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = <span class="number">111.231</span>.<span class="number">237.167</span></span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"><span class="attr">token</span> = <span class="number">12345678</span></span><br><span class="line"><span class="section">[rdp]</span></span><br><span class="line"><span class="attr">type</span> = tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span>           </span><br><span class="line"><span class="attr">local_port</span> = <span class="number">3389</span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">7001</span>  </span><br><span class="line"><span class="section">[smb]</span></span><br><span class="line"><span class="attr">type</span> = tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">445</span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">7002</span></span><br></pre></td></tr></table></figure>
<p>配置节点的内容说明如下：</p>
<ul>
<li><code>server_addr</code>：这个很好理解了，就是我们服务器的 IP 地址。</li>
<li><code>server_port</code>：前文 <code>frps</code> 中配置的服务器监听的端口。</li>
<li><code>token</code>：前文 <code>frps</code> 中配置的通行证。</li>
<li><code>local_ip</code>：本地 IP，无需赘述。</li>
<li><code>local_port</code>：需要转发到的本地端口，因为 <code>Windows</code> 的远程端口默认是 <code>3389</code>，所以这里使用的是 <code>3389</code>。</li>
<li><code>remote_port</code>：服务端转发用的端口，例如我这里配置的是 <code>7001</code>，那么我从其他电脑远程到这台电脑时，就可以使用 <code>111.231.237.167:7001</code> 来完成连接。</li>
</ul>
<p>配置完成后需要启动客户端，才可以从其他电脑访问。（这不是废话吗？）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\frp</span><br><span class="line">./frpc -c frpc.ini</span><br></pre></td></tr></table></figure>
<p>这时有个命令窗不能关闭，太麻烦了，如果想隐藏，建议创建一个批处理文件，并放到启动文件夹下。</p>
<p><code>frpc.bat</code> 文件内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">cd</span> /d %~dp0</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;%1&quot;</span> == <span class="string">&quot;h&quot;</span> goto begin</span><br><span class="line">mshta vbscript:createobject(<span class="string">&quot;wscript.shell&quot;</span>).run(<span class="string">&quot;&quot;</span><span class="string">&quot;%~nx0&quot;</span><span class="string">&quot; h&quot;</span>,0)(window.close)&amp;&amp;<span class="built_in">exit</span></span><br><span class="line">:begin</span><br><span class="line">REM</span><br><span class="line"><span class="built_in">cd</span> C:\frp</span><br><span class="line">frpc -c frpc.ini</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p>可以通过运行 <code>%programdata%\Microsoft\Windows\Start Menu\Programs\Startup</code> 打开启动文件夹，把文件放进去就能开机启动。</p>
<p>执行该批处理文件，把软件运行起来，接下来就是测试效果了。</p>
<blockquote>
<p>注意：<code>cd /d %~dp0</code> 这一行不添加，以管理员身份运行脚本将报错 <code>当前页面脚本发生错误：系统找不到指定的文件</code>。</p>
</blockquote>
<blockquote>
<p>注意：客户端节点 <code>[rdp]</code> 与 <code>[smb]</code> 为代理任务名，在多台电脑配置时，除需要修改 <code>remote_port</code> 外，该名称也需要调整，否则执行 <code>frpc -c frpc.ini</code> 将提示名称被占用。</p>
</blockquote>
<h2 id="测试效果"><a href="#测试效果" class="headerlink" title="测试效果"></a>测试效果</h2><p>当然，正常情况下 Windows 的 <code>mstsc</code> 肯定是没问题了，接下来要玩点花样。</p>
<p>这里首先使用我的小黑果来完成测试，使用的软件是 <code>Microsoft Remote Desktop</code>，测试效果如下。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/remote%20test-39e2bb06096e45daaa45c2bf9214c5a0.jpg" alt="remote test"></p>
<p>而且移动设备也可以连接，例如本文部分内容是小米手机安装了 <code>RD Client</code> 后，连接了罗技的蓝牙鼠标与键盘编辑的，输入和鼠标使用都很正常，就是有点费眼睛。</p>
<p><img src="https://hd2y.oss-cn-beijing.aliyuncs.com/image-ea7543dd30784070a5ce4deeff972f84.png" alt="image.png"></p>
<p>另外我还尝试了 iPad 连接使用，毕竟 iPad OS 现在吹的神乎其神。</p>
<p>但是实际体验鼠标体验很差，而键盘连接后在远程工具中既不能调用远程电脑的输入法，也不能使用 iPad 的输入法输入，还是别想拿 iPad 充当生产力工具了，还是老老实实爱奇艺吧。</p>
<blockquote>
<p>参考：</p>
<ul>
<li>GitHub：<a target="_blank" rel="noopener" href="https://github.com/fatedier/frp">fatedier / frp</a></li>
<li>StackOverflow：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/48678152/how-to-detect-386-amd64-arm-or-arm64-os-architecture-via-shell-bash">How to detect 386, amd64, arm, or arm64 OS architecture via shell/bash</a></li>
</ul>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/frp-access-the-intranet-computer/" data-id="cklhh35zc004zyiqk9s07as49" data-title="使用 frp 实现内网穿透访问内网电脑" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/frp/" rel="tag">frp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mstsc/" rel="tag">mstsc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BF%9C%E7%A8%8B/" rel="tag">远程</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-200424-wpf-controls-and-layout" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/wpf-controls-and-layout/" class="article-date">
  <time class="dt-published" datetime="2020-04-24T08:02:31.000Z" itemprop="datePublished">2020-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a>►<a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91/C/WPF/">WPF</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/wpf-controls-and-layout/">WPF 系列教程：控件之布局</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>布局（Layout）控件用于管理子元素的大小、尺寸、位置和排列方式。</p>
<h2 id="边框（Border）"><a href="#边框（Border）" class="headerlink" title="边框（Border）"></a>边框（Border）</h2><p><code>Border</code> 可以在另一个元素周围绘制边框与背景。</p>
<p>需要注意的是，<code>Border</code> 内最多只能有一个子级。</p>
<p>若要显示多个子元素，需要在父 <code>Border</code> 中放置其他 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.panel?view=netframework-4.8">Panel</a> 元素，可以将子元素放在该 <code>Panel</code> 元素中。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Border</span> <span class="attr">Background</span>=<span class="string">&quot;LightBlue&quot;</span> <span class="attr">BorderBrush</span>=<span class="string">&quot;Black&quot;</span> <span class="attr">BorderThickness</span>=<span class="string">&quot;2&quot;</span> <span class="attr">CornerRadius</span>=<span class="string">&quot;45&quot;</span> <span class="attr">Padding</span>=<span class="string">&quot;25&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="子弹装饰器（BulletDecorator）"><a href="#子弹装饰器（BulletDecorator）" class="headerlink" title="子弹装饰器（BulletDecorator）"></a>子弹装饰器（BulletDecorator）</h2><p><code>BulletDecorator</code> 是一个布局控件，该控件可以将项目符号与另一个可视对象对齐。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">StackPanel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">BulletDecorator</span> <span class="attr">Margin</span>=<span class="string">&quot;5&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Yellow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Image</span> <span class="attr">Width</span>=<span class="string">&quot;50&quot;</span> <span class="attr">Source</span>=<span class="string">&quot;pack://application:,,,/WpfExample;component/images/bullet.png&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">TextWrapping</span>=<span class="string">&quot;Wrap&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">Foreground</span> =<span class="string">&quot;Purple&quot;</span>&gt;</span>A Simple BulletDecorator<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">BulletDecorator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">BulletDecorator</span> <span class="attr">Margin</span>=<span class="string">&quot;5&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Yellow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Image</span> <span class="attr">Width</span>=<span class="string">&quot;20&quot;</span> <span class="attr">Source</span>=<span class="string">&quot;pack://application:,,,/WpfExample;component/images/apple.jpg&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">TextWrapping</span>=<span class="string">&quot;Wrap&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">Foreground</span> =<span class="string">&quot;Purple&quot;</span>&gt;</span>A Simple BulletDecorator<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">BulletDecorator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">BulletDecorator</span> <span class="attr">Margin</span>=<span class="string">&quot;5&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Yellow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Ellipse</span> <span class="attr">Margin</span>=<span class="string">&quot;5,0,0,0&quot;</span> <span class="attr">Height</span>=<span class="string">&quot;10&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;10&quot;</span> <span class="attr">Fill</span>=<span class="string">&quot;Purple&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">Ellipse</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">Margin</span>=<span class="string">&quot;10,0,0,0&quot;</span> <span class="attr">TextWrapping</span>=<span class="string">&quot;Wrap&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">Foreground</span> =<span class="string">&quot;Purple&quot;</span>&gt;</span>A Simple BulletDecorator<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">BulletDecorator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">BulletDecorator</span> <span class="attr">Margin</span>=<span class="string">&quot;5&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Yellow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Ellipse</span> <span class="attr">Margin</span>=<span class="string">&quot;5,0,0,0&quot;</span> <span class="attr">Height</span>=<span class="string">&quot;10&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;10&quot;</span> <span class="attr">Fill</span>=<span class="string">&quot;Purple&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">Ellipse</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">Margin</span>=<span class="string">&quot;10,0,0,0&quot;</span> <span class="attr">TextWrapping</span>=<span class="string">&quot;Wrap&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">Foreground</span> =<span class="string">&quot;Purple&quot;</span>&gt;</span>A Simple BulletDecorator<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">BulletDecorator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">BulletDecorator</span> <span class="attr">Margin</span>=<span class="string">&quot;5&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Yellow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CheckBox</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">BulletDecorator.Bullet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">Margin</span>=<span class="string">&quot;10,0,0,0&quot;</span> <span class="attr">TextWrapping</span>=<span class="string">&quot;Wrap&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">Foreground</span> =<span class="string">&quot;Purple&quot;</span>&gt;</span>A very very veryvery very very very long text BulletDecorator<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">BulletDecorator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">StackPanel</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如上代码所展示的是一个使用 <code>BulletDecorator</code> 控件实现一个无序列表。可以任意定义 <code>Bullet</code> 以及 <code>Child</code> 内的内容。</p>
<p>以上例子分别使用了图形与圆形放置在 <code>Bullet</code> 中作为列表的符号，<code>Child</code> 内容固定为一段文本内容，当文本换行时，文本的第一行将与列表符号对齐。</p>
<p>该控件除可以作为列表提供展示外，还可以在 <code>Bullet</code> 中放置单选框、多选框、输入框等。</p>
<h2 id="Canvas（画布）"><a href="#Canvas（画布）" class="headerlink" title="Canvas（画布）"></a>Canvas（画布）</h2><p>定义一个区域，可在其中使用相对于 <code>Canvas</code> 区域的坐标以显式方式来定位子元素。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Canvas</span> <span class="attr">Height</span>=<span class="string">&quot;400&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;400&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Canvas</span> <span class="attr">Height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Top</span>=<span class="string">&quot;0&quot;</span> <span class="attr">Left</span>=<span class="string">&quot;0&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Red&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Canvas</span> <span class="attr">Height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Top</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Left</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Green&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Canvas</span> <span class="attr">Height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">Top</span>=<span class="string">&quot;50&quot;</span> <span class="attr">Left</span>=<span class="string">&quot;50&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Blue&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>需要注意的是 <code>Canvas</code> 作为一个存储控件的容器，其不会自动调整内部元素的大小与排列。</p>
<p><code>Canvas</code> 默认也不会裁剪超出自身范围的内容，溢出的内容将会显示在 <code>Canvas</code> 外，可以通过通过调整 <code>ClipToBounds</code> 属性，来控制是否裁剪多出的内容。</p>
<h2 id="停靠面板（DockPanel）"><a href="#停靠面板（DockPanel）" class="headerlink" title="停靠面板（DockPanel）"></a>停靠面板（DockPanel）</h2><p>定义一个区域，从中可以按相对位置水平或垂直排列各个子元素。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">DockPanel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span> <span class="attr">DockPanel.Dock</span>=<span class="string">&quot;Top&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Aqua&quot;</span>&gt;</span>1(Top)<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span> <span class="attr">DockPanel.Dock</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Green&quot;</span>&gt;</span>2(Left)<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span> <span class="attr">DockPanel.Dock</span>=<span class="string">&quot;Right&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Yellow&quot;</span>&gt;</span>3(Right)<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span> <span class="attr">DockPanel.Dock</span>=<span class="string">&quot;Bottom&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Blue&quot;</span>&gt;</span>4(Bottom)<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DockPanel</span> <span class="attr">Background</span>=<span class="string">&quot;Orange&quot;</span> <span class="attr">LastChildFill</span>=<span class="string">&quot;False&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">Height</span>=<span class="string">&quot;20&quot;</span>&gt;</span>Button 1<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">Height</span>=<span class="string">&quot;20&quot;</span>&gt;</span>Button 2<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">DockPanel.Dock</span>=<span class="string">&quot;Right&quot;</span> <span class="attr">Height</span>=<span class="string">&quot;20&quot;</span>&gt;</span>Button 3<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">DockPanel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">DockPanel</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>SetDock</code> 方法更改某个元素相对于同一容器中的其他元素的位置。对齐属性（如 <code>HorizontalAlignment</code>）更改元素相对于其父元素的位置。</p>
<p>默认情况下 <code>DockPanel</code> 中的最后一个元素将填充剩余空间，而不考虑最后一个元素设置的任何其他 <code>Dock</code> 值，可以通过指定 <code>LastChildFill</code> 属性并设置停靠方向来调整。</p>
<p>默认情况下，<code>Panel</code> 元素不接收焦点。 若要强制 <code>Panel</code> 元素接收焦点，请将 <code>Focusable</code> 属性设置为 <code>true</code>。</p>
<h2 id="扩展器（Expander）"><a href="#扩展器（Expander）" class="headerlink" title="扩展器（Expander）"></a>扩展器（Expander）</h2><p><code>Expander</code> 是一个可以展开和折叠的控件，它包含标头 <code>Header</code> 和内容 <code>Content</code> 两个部分。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Expander</span> <span class="attr">Background</span>=<span class="string">&quot;Tan&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">ExpandDirection</span>=<span class="string">&quot;Down&quot;</span> <span class="attr">IsExpanded</span>=<span class="string">&quot;True&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Expander.Header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span>&gt;</span>hd2y<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Expander.Header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StackPanel</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span>&gt;</span><span class="tag">&lt;<span class="name">Hyperlink</span>&gt;</span>用户中心<span class="tag">&lt;/<span class="name">Hyperlink</span>&gt;</span><span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span>&gt;</span><span class="tag">&lt;<span class="name">Hyperlink</span>&gt;</span>博客<span class="tag">&lt;/<span class="name">Hyperlink</span>&gt;</span><span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span>&gt;</span><span class="tag">&lt;<span class="name">Hyperlink</span>&gt;</span>注销<span class="tag">&lt;/<span class="name">Hyperlink</span>&gt;</span><span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">StackPanel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Expander</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>Content</code> 和 <code>Header</code> 属性可以是任何类型（如字符串、图像或面板）。</p>
<p>如果展开窗口的内容对窗口而言太大，则可以将 <code>Expander</code> 的内容包装在 <code>ScrollViewer</code> 控件中以提供可滚动的内容。 <code>Expander</code> 控件不自动提供滚动功能。</p>
<h2 id="网格（Grid）"><a href="#网格（Grid）" class="headerlink" title="网格（Grid）"></a>网格（Grid）</h2><p><code>Grid</code> 用来定义由列和行组成的灵活的网格区域。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Grid</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Top&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">ShowGridLines</span>=<span class="string">&quot;True&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;250&quot;</span> <span class="attr">Height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ColumnDefinition</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ColumnDefinition</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ColumnDefinition</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Grid.RowDefinitions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RowDefinition</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RowDefinition</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RowDefinition</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RowDefinition</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Grid.RowDefinitions</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">FontSize</span>=<span class="string">&quot;20&quot;</span> <span class="attr">FontWeight</span>=<span class="string">&quot;Bold&quot;</span> <span class="attr">Grid.ColumnSpan</span>=<span class="string">&quot;3&quot;</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;0&quot;</span>&gt;</span>2005 Products Shipped<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">FontSize</span>=<span class="string">&quot;12&quot;</span> <span class="attr">FontWeight</span>=<span class="string">&quot;Bold&quot;</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;0&quot;</span>&gt;</span>Quarter 1<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">FontSize</span>=<span class="string">&quot;12&quot;</span> <span class="attr">FontWeight</span>=<span class="string">&quot;Bold&quot;</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;1&quot;</span>&gt;</span>Quarter 2<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">FontSize</span>=<span class="string">&quot;12&quot;</span> <span class="attr">FontWeight</span>=<span class="string">&quot;Bold&quot;</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;2&quot;</span>&gt;</span>Quarter 3<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;2&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;0&quot;</span>&gt;</span>50000<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;2&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;1&quot;</span>&gt;</span>100000<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;2&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;2&quot;</span>&gt;</span>150000<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">FontSize</span>=<span class="string">&quot;16&quot;</span> <span class="attr">FontWeight</span>=<span class="string">&quot;Bold&quot;</span> <span class="attr">Grid.ColumnSpan</span>=<span class="string">&quot;3&quot;</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;3&quot;</span>&gt;</span>Total Units: 300000<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>默认情况下列宽与行高是等比例分配，可以设置 <code>Width</code> 与 <code>Height</code> 属性为 <code>Auto</code> 让宽高自适应。</p>
<p>宽高除可以设置为 <code>Auto</code> 外，其默认值为 <code>1*</code>，这里 <code>*</code> 会使用设定了固定值外的剩余空间，按前面设置的数值进行等比例分配。</p>
<p>固定值我们可以设置 <code>100</code>、<code>100px</code>、<code>100pt</code>、<code>100cm</code>、<code>100in</code>，默认单位为 <code>px</code>，所以 <code>100</code> 与 <code>100px</code> 是同样的。</p>
<p>在子元素中，我们可以通过设置 <code>ColumnSpan</code> 与 <code>RowSpan</code>，让这个元素跨列或跨行显示。</p>
<h2 id="网格拆分器（GridSplitter）"><a href="#网格拆分器（GridSplitter）" class="headerlink" title="网格拆分器（GridSplitter）"></a>网格拆分器（GridSplitter）</h2><p>利用 <code>Grid</code> 我们可以很方便的划分单元格，并通过设定宽高来控制每行每列所占用的空间。</p>
<p>但是如果想要让用户来改变每行每列的宽高，就需要使用 <code>GridSplitter</code> 来实现这样的效果。</p>
<p>例如以下代码，定义了一个 <code>GridSplitter</code>，通过覆盖列的边缘来调整 Grid 中列的大小：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ColumnDefinition</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ColumnDefinition</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">GridSplitter</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;0&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Blue&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;5&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Right&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Stretch&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>而以下代码中，<code>GridSplitter</code> 将在 <code>Grid</code> 中占用一列：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ColumnDefinition</span> <span class="attr">Width</span>=<span class="string">&quot;2*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ColumnDefinition</span> <span class="attr">Width</span>=<span class="string">&quot;Auto&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ColumnDefinition</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">GridSplitter</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;1&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Stretch&quot;</span> <span class="attr">Background</span>=<span class="string">&quot;Black&quot;</span> <span class="attr">ShowsPreview</span>=<span class="string">&quot;True&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="组框（GroupBox）"><a href="#组框（GroupBox）" class="headerlink" title="组框（GroupBox）"></a>组框（GroupBox）</h2><p><code>GroupBox</code> 控件可以在用户界面的内容外创建一个带有边框与标题的容器。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">GroupBox</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">GroupBox.Header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Label</span>&gt;</span>health information<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">GroupBox.Header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Grid.RowDefinitions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">RowDefinition</span> <span class="attr">Height</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">RowDefinition</span> <span class="attr">Height</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">RowDefinition</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Grid.RowDefinitions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ColumnDefinition</span> <span class="attr">Width</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ColumnDefinition</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Grid.ColumnDefinitions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Label</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Right&quot;</span>&gt;</span>height:<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Label</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;1&quot;</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Center&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Right&quot;</span>&gt;</span>weight:<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBox</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;0&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Margin</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">TextBox</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBox</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Grid.Column</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Margin</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">TextBox</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">GroupBox</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>GroupBox</code> 的效果类似 <code>html</code> 中的 <code>fieldset</code> 标签。</p>
<p>另外需要注意的是，<code>GroupBox</code> 是 <code>HeaderedContentControl</code>，这意味着其 <code>Content</code> 和 <code>Header</code> 属性可以是任何类型（如字符串、图像或面板）。</p>
<h2 id="分离器（Separator）"><a href="#分离器（Separator）" class="headerlink" title="分离器（Separator）"></a>分离器（Separator）</h2><p><code>Separator</code> 控件是用来分隔控件中的多个项。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ToolBarTray</span> <span class="attr">Background</span>=<span class="string">&quot;White&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ToolBar</span> <span class="attr">Band</span>=<span class="string">&quot;1&quot;</span> <span class="attr">BandIndex</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>New<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Open<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Save<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Separator</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Cut<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Copy<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Paste<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Separator</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Print<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Preview<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ToolBar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ToolBarTray</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="滚动条（ScrollBar）"><a href="#滚动条（ScrollBar）" class="headerlink" title="滚动条（ScrollBar）"></a>滚动条（ScrollBar）</h2><p><code>ScrollBar</code> 提供一个滚动条的控件，其位置对应于值。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ScrollBar</span> <span class="attr">Orientation</span>=<span class="string">&quot;Horizontal&quot;</span> <span class="attr">Width</span> =<span class="string">&quot;4in&quot;</span> <span class="attr">Value</span>=<span class="string">&quot;50&quot;</span> <span class="attr">Minimum</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Maximum</span>=<span class="string">&quot;100&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="滚动查看器（ScrollViewer）"><a href="#滚动查看器（ScrollViewer）" class="headerlink" title="滚动查看器（ScrollViewer）"></a>滚动查看器（ScrollViewer）</h2><p><code>ScrollViewer</code> 定义可滚动的区域，可以包含其他可见元素。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ScrollViewer</span> <span class="attr">HorizontalScrollBarVisibility</span>=<span class="string">&quot;Auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StackPanel</span> <span class="attr">VerticalAlignment</span>=<span class="string">&quot;Top&quot;</span> <span class="attr">HorizontalAlignment</span>=<span class="string">&quot;Left&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextBlock</span> <span class="attr">TextWrapping</span>=<span class="string">&quot;Wrap&quot;</span> <span class="attr">Margin</span>=<span class="string">&quot;0,0,0,20&quot;</span>&gt;</span>Scrolling is enabled when it is necessary. Resize the window, making it larger and smaller.<span class="tag">&lt;/<span class="name">TextBlock</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Rectangle</span> <span class="attr">Fill</span>=<span class="string">&quot;Red&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">Height</span>=<span class="string">&quot;500&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Rectangle</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">StackPanel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ScrollViewer</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="堆栈面板（StackPanel）"><a href="#堆栈面板（StackPanel）" class="headerlink" title="堆栈面板（StackPanel）"></a>堆栈面板（StackPanel）</h2><p><code>StackPanel</code> 可以将子元素排列成水平或垂直的一行。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Grid.RowDefinitions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RowDefinition</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RowDefinition</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Grid.RowDefinitions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StackPanel</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Test1<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Test2<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Test3<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">StackPanel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StackPanel</span> <span class="attr">Grid.Row</span>=<span class="string">&quot;1&quot;</span> <span class="attr">Orientation</span>=<span class="string">&quot;Horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Test4<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Test5<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span>Test6<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">StackPanel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>默认子元素会垂直排列，可以修改 <code>Orientation</code> 属性为 <code>Horizontal</code>，子元素将水平排列。</p>
<h2 id="查看框（ViewBox）"><a href="#查看框（ViewBox）" class="headerlink" title="查看框（ViewBox）"></a>查看框（ViewBox）</h2><p><code>ViewBox</code> 组件的作用是拉伸或延展位于其中的组件，使之有更好的布局及视觉效果。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Viewbox</span> <span class="attr">Stretch</span>=<span class="string">&quot;Fill&quot;</span> <span class="attr">StretchDirection</span>=<span class="string">&quot;Both&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">Height</span>=<span class="string">&quot;60&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Viewbox</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>ViewBox</code> 内只能有一个子元素，另外可以通过设置 <code>Stretch</code> 与 <code>StretchDirection</code> 属性，来设置内容的缩放效果。</p>
<p><code>Stretch</code> 可选项有：</p>
<ul>
<li><code>None</code>：原始大小。</li>
<li><code>Fill</code>：填充，子元素占满整个 <code>Viewbox</code>，不保证宽高比例。</li>
<li><code>Uniform</code>：等比例缩放。在 <code>Viewbox</code> 能完整显示子元素的最大尺寸；</li>
<li><code>UniformToFill</code>：等比例缩放填充，子元素在保证缩放的情况下填充 <code>Viewbox</code>，多余的部分被裁剪。</li>
</ul>
<p><code>StretchDirection</code> 可选项有：</p>
<ul>
<li><code>Both</code>：内容根据 <code>Stretch</code> 模式进行缩放以适合父项的大小；</li>
<li><code>DownOnly</code>：内容仅在大于父级时缩放。如果内容较小，则不会执行任何缩放。</li>
<li><code>UpOnly</code>：内容仅在小于父级时缩放。如果内容较大，则不执行缩放。</li>
</ul>
<h2 id="窗口（Window）"><a href="#窗口（Window）" class="headerlink" title="窗口（Window）"></a>窗口（Window）</h2><p><code>Window</code> 提供了创建、配置、显示、管理窗口与对话框的生命周期的能力。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Window</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span> <span class="attr">Title</span>=<span class="string">&quot;Main Window in Markup Only&quot;</span> <span class="attr">Height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">Width</span>=<span class="string">&quot;300&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>用户与独立应用程序之间的交互点是一个窗口。<code>WPF</code> 窗口包含两个不同的区域：</p>
<ul>
<li>承载 <code>Windows</code> 修饰的非工作区，包括图标、标题、系统菜单、最小化按钮、最大化按钮、还原按钮、关闭按钮和边框。</li>
<li>承载特定于应用程序的内容的工作区。</li>
</ul>
<p><code>Window</code> 封装了创建、配置、显示和管理窗口和对话框的声明周期的功能，并提供了以下关键服务：</p>
<ul>
<li>生命周期管理：<code>Activate</code>、<code>Activated</code>、<code>Close</code>、<code>Closed</code>、<code>Closing</code>、<code>Deactivated</code>、<code>Hide</code>、<code>IsActive</code>、<code>Show</code>、<code>SourceInitialized</code>。</li>
<li>窗口管理：<code>GetWindow</code>、<code>OwnedWindowsOwner</code>。</li>
<li>外观和行为：<code>AllowsTransparency</code>、<code>ContentRendered</code>、<code>DragMove</code>、<code>Icon</code>、<code>Left</code>、<code>LocationChanged</code>、<code>ResizeMode</code>、<code>RestoreBounds</code>、<code>ShowActivated</code>、<code>ShowInTaskbar</code>、<code>SizeToContent</code>、<code>StateChanged</code>、<code>Title</code>、<code>Top</code>、<code>Topmost</code>、<code>WindowStartupLocation</code>、<code>WindowState</code>、<code>WindowStyle</code>。</li>
<li>对话框：<code>DialogResult</code>，<code>ShowDialog</code>。</li>
</ul>
<p>此外，<code>Application</code> 公开了对管理应用程序中的所有窗口的特殊支持：应用程序维护当前在应用程序中实例化的所有窗口的列表。 此列表由 <code>Windows</code> 属性公开。</p>
<p>默认情况下，将使用对应用程序中实例化的第一个 <code>Window</code> 的引用自动设置 <code>MainWindow</code>。 从而使窗口成为主应用程序窗口。</p>
<p><code>Window</code> 主要用于显示独立应用程序的窗口和对话框。但是，对于需要在窗口级别导航的应用程序（如向导），可以改用 <code>NavigationWindow</code>。<code>NavigationWindow</code> 派生自 <code>Window</code> 并通过浏览器样式的导航支持对其进行扩展。</p>
<blockquote>
<p><strong>注：</strong> 本文的目的是为了熟悉常见的布局控件，所以存在大段的复制粘贴。<br>示例代码来自 <code>MSDN</code>，内容已经上传至 <code>github</code>：<a target="_blank" rel="noopener" href="https://github.com/hd2y/WpfExample">hd2y/WpfExample</a></p>
</blockquote>
<blockquote>
<p>参考：</p>
<ul>
<li>MSDN：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/framework/wpf/controls/controls-by-category">Controls by Category</a></li>
<li>CSDN：<a target="_blank" rel="noopener" href="https://blog.csdn.net/tcjiaan/article/details/6961335">继续聊 WPF —— Thumb 控件</a></li>
</ul>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/wpf-controls-and-layout/" data-id="cklhh35za004wyiqk326250ng" data-title="WPF 系列教程：控件之布局" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/">开发</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/C/">C#</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/C/ASP-NET-Core/">ASP.NET Core</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/C/WPF/">WPF</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E4%B8%9A%E5%8A%A1/">业务</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%9F%BA%E7%A1%80/">基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle/">Oracle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/PostgreSQL/">PostgreSQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL-Server/">SQL Server</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%95%B0%E6%8D%AE%E5%BA%93/SQLite/">SQLite</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91/%E6%9D%82%E8%B0%88/">杂谈</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/MacOS/">MacOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BD%AF%E4%BB%B6/">软件</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/">日志</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/%E5%85%AC%E5%91%8A/">公告</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/%E5%BC%80%E7%AE%B1/">开箱</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/%E6%9D%82%E8%B0%88/">杂谈</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET-Standard/" rel="tag">.NET Standard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOP/" rel="tag">AOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASCII/" rel="tag">ASCII</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActiveX/" rel="tag">ActiveX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Attribute/" rel="tag">Attribute</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Autofac/" rel="tag">Autofac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFG/" rel="tag">BFG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCProxy/" rel="tag">CCProxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DBeaver/" rel="tag">DBeaver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Expression/" rel="tag">Expression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fody/" rel="tag">Fody</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDI/" rel="tag">GDI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitea/" rel="tag">Gitea</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HIS/" rel="tag">HIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HongYang/" rel="tag">HongYang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDE/" rel="tag">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IE/" rel="tag">IE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jint/" rel="tag">Jint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Json/" rel="tag">Json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kindle/" rel="tag">Kindle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LIS/" rel="tag">LIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LODOP/" rel="tag">LODOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MVC/" rel="tag">MVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOS/" rel="tag">MacOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Math/" rel="tag">Math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NHibernate/" rel="tag">NHibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nexus3/" rel="tag">Nexus3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Note/" rel="tag">Note</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NuGet/" rel="tag">NuGet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SOA/" rel="tag">SOA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/" rel="tag">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP/" rel="tag">TCP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Telegram/" rel="tag">Telegram</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TreeView/" rel="tag">TreeView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tuple/" rel="tag">Tuple</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/" rel="tag">UI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/" rel="tag">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity/" rel="tag">Unity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/" rel="tag">VS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode/" rel="tag">VSCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ValueTuple/" rel="tag">ValueTuple</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WCF/" rel="tag">WCF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WPF/" rel="tag">WPF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebApi/" rel="tag">WebApi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebService/" rel="tag">WebService</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WinForm/" rel="tag">WinForm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows-XP/" rel="tag">Windows XP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xml/" rel="tag">Xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decimal/" rel="tag">decimal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frp/" rel="tag">frp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbc/" rel="tag">jdbc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mstsc/" rel="tag">mstsc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%B2%E5%8F%A3/" rel="tag">串口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">代理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" rel="tag">依赖注入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%83%E7%BB%84/" rel="tag">元组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A0%E5%AF%86/" rel="tag">加密</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93/" rel="tag">动态链接库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8D%E5%B0%84/" rel="tag">反射</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A7%94%E6%89%98/" rel="tag">委托</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B4%E9%BE%84/" rel="tag">年龄</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" rel="tag">序列化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%83%E5%85%83/" rel="tag">弃元</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%93%E5%8D%B0/" rel="tag">打印</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/" rel="tag">构造函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0/" rel="tag">析构函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%9A%E4%B8%BE/" rel="tag">枚举</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99/" rel="tag">正则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%9B%E5%9E%8B/" rel="tag">泛型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%91%9E%E7%BE%8E/" rel="tag">瑞美</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">虚拟机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%80%E7%90%83%E4%BB%AA/" rel="tag">血球仪</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%A3%E6%9E%84%E5%87%BD%E6%95%B0/" rel="tag">解构函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E8%AF%95/" rel="tag">调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%9D%E5%85%8B%E6%9B%BC/" rel="tag">贝克曼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BA%AB%E4%BB%BD%E8%AF%81%E8%AF%BB%E5%8D%A1/" rel="tag">身份证读卡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9C%E7%A8%8B/" rel="tag">远程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AA%E9%80%80/" rel="tag">闪退</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/NET-Standard/" style="font-size: 10px;">.NET Standard</a> <a href="/tags/AOP/" style="font-size: 10px;">AOP</a> <a href="/tags/ASCII/" style="font-size: 10px;">ASCII</a> <a href="/tags/ActiveX/" style="font-size: 10px;">ActiveX</a> <a href="/tags/Attribute/" style="font-size: 10px;">Attribute</a> <a href="/tags/Autofac/" style="font-size: 10px;">Autofac</a> <a href="/tags/BFG/" style="font-size: 10px;">BFG</a> <a href="/tags/CCProxy/" style="font-size: 10px;">CCProxy</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/DBeaver/" style="font-size: 12.5px;">DBeaver</a> <a href="/tags/Expression/" style="font-size: 10px;">Expression</a> <a href="/tags/Fody/" style="font-size: 10px;">Fody</a> <a href="/tags/GDI/" style="font-size: 10px;">GDI</a> <a href="/tags/Git/" style="font-size: 12.5px;">Git</a> <a href="/tags/GitHub/" style="font-size: 12.5px;">GitHub</a> <a href="/tags/Gitea/" style="font-size: 10px;">Gitea</a> <a href="/tags/HIS/" style="font-size: 12.5px;">HIS</a> <a href="/tags/HongYang/" style="font-size: 10px;">HongYang</a> <a href="/tags/IDE/" style="font-size: 10px;">IDE</a> <a href="/tags/IE/" style="font-size: 10px;">IE</a> <a href="/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/tags/Jint/" style="font-size: 12.5px;">Jint</a> <a href="/tags/Json/" style="font-size: 10px;">Json</a> <a href="/tags/Kindle/" style="font-size: 10px;">Kindle</a> <a href="/tags/LIS/" style="font-size: 17.5px;">LIS</a> <a href="/tags/LODOP/" style="font-size: 10px;">LODOP</a> <a href="/tags/MVC/" style="font-size: 10px;">MVC</a> <a href="/tags/MacOS/" style="font-size: 10px;">MacOS</a> <a href="/tags/Math/" style="font-size: 10px;">Math</a> <a href="/tags/NHibernate/" style="font-size: 10px;">NHibernate</a> <a href="/tags/Nexus3/" style="font-size: 10px;">Nexus3</a> <a href="/tags/Note/" style="font-size: 10px;">Note</a> <a href="/tags/NuGet/" style="font-size: 10px;">NuGet</a> <a href="/tags/OOP/" style="font-size: 10px;">OOP</a> <a href="/tags/Oracle/" style="font-size: 10px;">Oracle</a> <a href="/tags/SOA/" style="font-size: 17.5px;">SOA</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/TCP/" style="font-size: 10px;">TCP</a> <a href="/tags/Telegram/" style="font-size: 10px;">Telegram</a> <a href="/tags/TreeView/" style="font-size: 10px;">TreeView</a> <a href="/tags/Tuple/" style="font-size: 10px;">Tuple</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/UML/" style="font-size: 10px;">UML</a> <a href="/tags/Unity/" style="font-size: 10px;">Unity</a> <a href="/tags/VS/" style="font-size: 10px;">VS</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/ValueTuple/" style="font-size: 10px;">ValueTuple</a> <a href="/tags/WCF/" style="font-size: 12.5px;">WCF</a> <a href="/tags/WPF/" style="font-size: 10px;">WPF</a> <a href="/tags/WebApi/" style="font-size: 15px;">WebApi</a> <a href="/tags/WebService/" style="font-size: 15px;">WebService</a> <a href="/tags/WinForm/" style="font-size: 10px;">WinForm</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/Windows-XP/" style="font-size: 12.5px;">Windows XP</a> <a href="/tags/Xml/" style="font-size: 10px;">Xml</a> <a href="/tags/decimal/" style="font-size: 10px;">decimal</a> <a href="/tags/frp/" style="font-size: 10px;">frp</a> <a href="/tags/jdbc/" style="font-size: 10px;">jdbc</a> <a href="/tags/mstsc/" style="font-size: 10px;">mstsc</a> <a href="/tags/%E4%B8%B2%E5%8F%A3/" style="font-size: 12.5px;">串口</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 12.5px;">代理</a> <a href="/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">依赖注入</a> <a href="/tags/%E5%85%83%E7%BB%84/" style="font-size: 12.5px;">元组</a> <a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 10px;">加密</a> <a href="/tags/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93/" style="font-size: 10px;">动态链接库</a> <a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 10px;">反射</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 20px;">多线程</a> <a href="/tags/%E5%A7%94%E6%89%98/" style="font-size: 10px;">委托</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">工具</a> <a href="/tags/%E5%B9%B4%E9%BE%84/" style="font-size: 10px;">年龄</a> <a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 10px;">序列化</a> <a href="/tags/%E5%BC%83%E5%85%83/" style="font-size: 10px;">弃元</a> <a href="/tags/%E6%89%93%E5%8D%B0/" style="font-size: 10px;">打印</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 10px;">日志</a> <a href="/tags/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/" style="font-size: 10px;">构造函数</a> <a href="/tags/%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0/" style="font-size: 10px;">析构函数</a> <a href="/tags/%E6%9E%9A%E4%B8%BE/" style="font-size: 10px;">枚举</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 15px;">正则</a> <a href="/tags/%E6%B3%9B%E5%9E%8B/" style="font-size: 12.5px;">泛型</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 10px;">爬虫</a> <a href="/tags/%E7%91%9E%E7%BE%8E/" style="font-size: 10px;">瑞美</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 12.5px;">虚拟机</a> <a href="/tags/%E8%A1%80%E7%90%83%E4%BB%AA/" style="font-size: 10px;">血球仪</a> <a href="/tags/%E8%A7%A3%E6%9E%84%E5%87%BD%E6%95%B0/" style="font-size: 10px;">解构函数</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12.5px;">设计模式</a> <a href="/tags/%E8%B0%83%E8%AF%95/" style="font-size: 10px;">调试</a> <a href="/tags/%E8%B4%9D%E5%85%8B%E6%9B%BC/" style="font-size: 10px;">贝克曼</a> <a href="/tags/%E8%BA%AB%E4%BB%BD%E8%AF%81%E8%AF%BB%E5%8D%A1/" style="font-size: 10px;">身份证读卡</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 10px;">软件</a> <a href="/tags/%E8%BF%9C%E7%A8%8B/" style="font-size: 10px;">远程</a> <a href="/tags/%E9%97%AA%E9%80%80/" style="font-size: 10px;">闪退</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 10px;">项目</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/instrument-communication/">检验仪器常见通信方案</a>
          </li>
        
          <li>
            <a href="/back-in-2020/">回顾2020年</a>
          </li>
        
          <li>
            <a href="/csharp-expression-script-evaluation-problems/">C# 中表达式计算问题</a>
          </li>
        
          <li>
            <a href="/aspnet-core-001-source-code-compilation-and-debugging/">ASP.NET Core - 001 源码编译与调试</a>
          </li>
        
          <li>
            <a href="/aspnet-core-000-development-environment-configuration/">ASP.NET Core - 000 开发环境配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 hd2y<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>